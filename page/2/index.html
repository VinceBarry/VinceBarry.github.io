<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>RoadToGeek技术小屋（少年，别再收藏文章了！）</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="RoadToGeek技术小屋">
<meta property="og:type" content="website">
<meta property="og:title" content="RoadToGeek技术小屋（少年，别再收藏文章了！）">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="RoadToGeek技术小屋（少年，别再收藏文章了！）">
<meta property="og:description" content="RoadToGeek技术小屋">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="RoadToGeek技术小屋（少年，别再收藏文章了！）">
<meta name="twitter:description" content="RoadToGeek技术小屋">
  
    <link rel="alternate" href="/atom.xml" title="RoadToGeek技术小屋（少年，别再收藏文章了！）" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">RoadToGeek技术小屋（少年，别再收藏文章了！）</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">RoadToGeek技术小屋</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-Linux菜鸟旅程足迹——Linux简介" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/07/11/Linux菜鸟旅程足迹——Linux简介/" class="article-date">
  <time datetime="2016-07-11T05:19:44.000Z" itemprop="datePublished">2016-07-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Linux学习/">Linux学习</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/11/Linux菜鸟旅程足迹——Linux简介/">Linux菜鸟旅程足迹——Linux简介</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="为什么学习Linux？"><a href="#为什么学习Linux？" class="headerlink" title="为什么学习Linux？"></a>为什么学习Linux？</h2><p>我为什么学习Linux？学习之前我问了一下自己，发现有以下几个原因值得我花时间去学习Linux：</p>
<ol>
<li><p>Linux很酷（这可能是驱动我学习的最大的原因……）毫无疑问，一个优秀的程序员必须会而且熟练地掌握Linux的使用。极客喜欢用Linux，要想成为极客，那么Linux必不可少，装X必备。</p>
</li>
<li><p>Android系统基于Linux实现。作为一名安卓猿，学会Linux有重要的意义。因为Android底层的实现是基于Linux的，如果想要深入学习Android开发，那么阅读Android源码必然绕不过去，会使用Linux也自然绕不过去了。所以学习Linux是为之后学习Android底层开发做准备。</p>
</li>
<li><p>对于系统学习计算机相关知识具有重要价值。</p>
</li>
<li><p>作为后台开发学习的重要一环。后台服务器端的开发部分基于Linux系统，所以学习Linux有一定的价值。</p>
</li>
</ol>
<p>好吧，扯这么多，其实还是装X最真实……当你打开小黑窗敲着一行行代码童鞋投来膜拜的眼神时，当你使用着优美的Ubuntu桌面舍友投来羡慕的眼神时，你就会发现Linux还是有用的，当你熟练阅读Linux源码开始改写自己的Linux内核时，那你一定没有女朋友（逃）</p>
<h2 id="Linux的起源"><a href="#Linux的起源" class="headerlink" title="Linux的起源"></a>Linux的起源</h2><p>Linux是由荷兰赫尔辛基大学的一个学生Linus Torvalds发明的。Linus将类Unix系统Minix进行修改，写出了自己的Linux内核，之后与发明了gcc,emacs,vim等强大的工具软件的GNU计划创始人Richard Stallman一拍即合，将以上工具与Linux内核整合形成了最终的Linux系统。</p>
<h2 id="Linux的特点"><a href="#Linux的特点" class="headerlink" title="Linux的特点"></a>Linux的特点</h2><p>遵循GNU/GPL、开放性、多用户、多任务、良好的用户界面、设备独立性、提供丰富的网络功能、可靠的系统安全、良好的可移植性。</p>
<h2 id="Linux的版本"><a href="#Linux的版本" class="headerlink" title="Linux的版本"></a>Linux的版本</h2><p>本机内核版本查看方式：uname -a</p>
<h3 id="内核版本："><a href="#内核版本：" class="headerlink" title="内核版本："></a>内核版本：</h3><p>Linux内核版本有两种：稳定版和开发版 ，Linux内核版本号由3组数字组成：第一个组数字.第二组数字.第三组数字<br>第一个组数字：目前发布的内核主版本。<br>第二个组数字：偶数表示稳定版本；奇数表示开发中版本。<br>第三个组数字：错误修补的次数。</p>
<p><strong>例1：</strong> 2.6.18-128.ELsmp.<br> 第一个组数字: 2 , 主版本号<br> 第二个组数字: 6 , 次版本号，表示稳定版本(因为有偶数)<br> 第三个组数字 18 , 修订版本号，表示修改的次数，头两个数字合在一齐可以描述内核系列。如稳定版的2.6.0，它是2.6版内核系列。128: 表示这个当前版本的第5次微调patch ， 而ELsmp指出了当前内核是为ELsmp特别调校的 EL:Enterprise Linux；smp:表示支持多处理器，表示该内核版本支持多处理器</p>
<h3 id="发行版本："><a href="#发行版本：" class="headerlink" title="发行版本："></a>发行版本：</h3><ol>
<li>Red Hat 主要有Red Hat个人版和企业版等,个人版发行到了9.0,而企业版现在最新的为6.0版本的系统.旗下并有Fedor和CentOS等,而CentOS是一个完全免费的版本.</li>
<li>SUSE 是Novell公司的发行版,现在主要是Open SUSE,而SUSE一贯以华丽的用户界面而著称的专业,优秀的发行版.</li>
<li>Debian 他是一个社区发行版,系统非常好,并且纯净.Debian大概有3000人左右组成,是一个独立,分散的组织,他们坚守自由软件的精神.发行版有：Ubuntu ,Mint,BackTrace等.</li>
<li>Gentoo 他是一个基于Portage包管理系统的发行版本,与其它发行版不同,用户自由的选择是其最大的特色,他为用户提供了大量的源代码,可以让用户在自己的主机上进行编译建造.</li>
<li>LFS 是Gerard Beekman等人编写的安装Linux的教科书,描述了从源代码编译Linux系统的方法.</li>
</ol>
<h2 id="Linux的安装"><a href="#Linux的安装" class="headerlink" title="Linux的安装"></a>Linux的安装</h2><p>关于Linux的安装，博主自己的两个Linux系统分别装在虚拟机（VMWare）和裸机上。虚拟机装的是CentOS，裸机直接安装的是Ubuntu。如果不是Linux重度使用者，仅仅是学习的目的，个人感觉虚拟机上安装已经足够使用，具体教程这里就不讲解了，自己借助搜索引擎尝试安装。</p>
<p>欢迎阅读下一篇笔记——Shell基础</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/07/11/Linux菜鸟旅程足迹——Linux简介/" data-id="cir1zx7ck0014xgyuhruhiwhq" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/原创/">原创</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Linux菜鸟旅程足迹系列" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/07/11/Linux菜鸟旅程足迹系列/" class="article-date">
  <time datetime="2016-07-11T05:14:19.000Z" itemprop="datePublished">2016-07-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Linux学习/">Linux学习</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/11/Linux菜鸟旅程足迹系列/">Linux菜鸟旅程足迹系列</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>前言：深入学习Android系统绕不开对Linux的学习，所以学会基本的Linux的使用十分有必要，对于之后的Android的源码学习具有重要的价值，这是一整个Linux系列的学习笔记，感谢欢迎大家的阅读。如果有疏漏或是错误的地方欢迎指出，谢谢！</strong></p>
<p><img src="http://bizhi.zhuoku.com/wall/20061112/linux/linux02.jpg" alt=""></p>
<h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><hr>
<h2 id="Linux基础"><a href="#Linux基础" class="headerlink" title="Linux基础"></a>Linux基础</h2><p><a href="http://roadtogeek.cn/2016/07/11/Linux%E8%8F%9C%E9%B8%9F%E6%97%85%E7%A8%8B%E8%B6%B3%E8%BF%B9%E2%80%94%E2%80%94Linux%E7%AE%80%E4%BB%8B/" target="_blank" rel="external">Linux菜鸟旅程足迹——Linux简介</a></p>
<p><a href="http://roadtogeek.cn/2016/07/11/Linux%E8%8F%9C%E9%B8%9F%E6%97%85%E7%A8%8B%E8%B6%B3%E8%BF%B9%E2%80%94%E2%80%94Shell%E5%9F%BA%E7%A1%80/" target="_blank" rel="external">Linux菜鸟旅程足迹——Shell基础</a></p>
<p>Linux菜鸟旅程足迹——Vim、Emacs的使用</p>
<h2 id="系统管理"><a href="#系统管理" class="headerlink" title="系统管理"></a>系统管理</h2><p>用户管理、进程管理</p>
<p>系统和服务管理</p>
<p>其他系统管理</p>
<p>磁盘与硬件管理</p>
<p>磁盘管理</p>
<p>文件与目录管理及安全</p>
<p>强制位与粘贴位、隐藏属性、访问控制列表</p>
<p>文件的压缩与解压缩</p>
<h2 id="软件包管理"><a href="#软件包管理" class="headerlink" title="软件包管理"></a>软件包管理</h2><p>RPM</p>
<p>yum</p>
<h2 id="系统管理高级"><a href="#系统管理高级" class="headerlink" title="系统管理高级"></a>系统管理高级</h2><p>逻辑卷管理</p>
<p>磁盘阵列</p>
<p>磁盘配额及虚拟技术</p>
<h2 id="Shell编程"><a href="#Shell编程" class="headerlink" title="Shell编程"></a>Shell编程</h2><p>Shell编程基础</p>
<p>流程控制、函数及调试</p>
<h2 id="网络服务"><a href="#网络服务" class="headerlink" title="网络服务"></a>网络服务</h2><p>网络接口配置</p>
<p>DHCP服务及配置</p>
<p>Samba服务器的设置</p>
<p>WWW服务器的设置</p>
<p>FTP服务器的设置</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/07/11/Linux菜鸟旅程足迹系列/" data-id="cir1zx7dt002hxgyulibi6ui3" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/原创/">原创</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-时隔一年高考所感所想" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/06/25/时隔一年高考所感所想/" class="article-date">
  <time datetime="2016-06-25T12:00:13.000Z" itemprop="datePublished">2016-06-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/心情随笔/">心情随笔</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/25/时隔一年高考所感所想/">时隔一年高考所感所想</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>今天是25号，高考放榜日。在咨询群里水着水着，突然感慨万千，心中突然产生许多困惑。于是提笔写下这篇文章，希望自己能够找到答案。</p>
<p>一年前的这一天的中午，我同所有高三学子一样，守候在电脑旁等待考试成绩的出现。我自认为能够得到上帝的眷顾，满怀期待等待着结果。我一边询问别的同学的情况，一边焦急地刷着鼠标。慢慢的，终于出现了。我挡着分数一个一个地看，语文数学，不错；英语，虽然不如平时，但差强人意吧。然而看到理综时一下子懵逼了。那一刻才意识到自己下的这场称为高考的棋失败了。之后便是带着糟糕的心情开始选专业选学校。印象中比较深刻的是当我走过一个个名牌大学时，那些耀目的招新简章和自己的成绩形成了鲜明而又刺眼的对比。这种滋味到今天仍然可以感受到，就是一种因为自身不足而被现实所羞辱的刺痛感。后来还因为选专业的事情跟父母吵了好几天。至今我依然坚持自己的观点，虽然父母是为我们着想，但是路毕竟是自己的，人生的选择还是得靠自己来完成。</p>
<p>然而上了大学才发现一切与自己想象的完全不一样。自己理想是成为一名真正意义上的极客，玩技术，利用键盘屏幕实现一些炫酷的东西，顺带以后能糊口（这个目标目前还很遥远）。大学前我嘲笑那些只会宅在宿舍打机，不懂出去外面活动接触新鲜事物的人；大学前我厌恶古板的教育制度；大学前我反感强制性的灌入式学习。然而如今这一切噩梦全然发生。我变得不再喜欢外出接触各类人和事物，宅在宿舍敲敲代码（很欣慰自己对编程创造有一如既往的兴趣，希望自己能够坚持下去）；我厌恶的古板教育方式仍然每天日复一日地进行着，每天像个木乃伊从教室到宿舍到食堂却基本毫无收获；此外，由于兴趣不在，基本课程都没有学习的欲望，却得虚伪地在考前预习为学分应付着。何其悲哀！自己所鄙视的竟然全然在自己身上体现出来。更加无奈的是，我身上的仅有的一点人文视野也在彷徨中慢慢消失，井底之蛙全然不知。至少到现在，理想中该有的大学并没有真正给我带来什么。除了人际交往之外，认识了几位有远大志向的骚年，他们正在实现着自己的精彩人生：有一心追求上进，喜爱Social，擅长交际，生活丰富多姿的文艺少年；有渴望学习各个方面技术知识，不挑食纯粹热爱学习的刨根问底的学霸；有学习专注，热心肠，技术出色，小日子美满的协会大佬。谢谢你们，你们是我奋斗的动力。现在我的大学至少还有你们让我感受得到前进的力量。</p>
<p>这种无助在与朋友谈论“别人家的大学”时更加明显。我喜欢逛知乎，知乎是一个能够让人意识到自己不足的地方。<strong>人永远不能将眼光仅仅放在自己周遭的环境之中，否则你会因为自我满足而沉沦。</strong> 比如某个人认为自己会打篮球，通常他只是在自己的圈子内可能打得可以，但是放眼全世界就不值一提了。所以要谦虚，要意识到世界上比自己强的人目前几乎趋于无穷；但是不能因为不值一提就放弃进步，还是要有野心，一步步前进。如果停止脚步，活着还有意思咩。寒假时与一中大发小聊天，听着他讲述着在中大的成长我为他高兴，也渐渐意识到强者愈强弱者愈弱这个可怕的现实。就计算机学习而言，别人一学期已经完成C++，数据结构的学习，我有一个认识的大一的同学已经同时涉略网络编程，算法，移动端开发，能够利用C++实现一些网络攻防技术；而我呢，目前仅仅会点安卓，算法和基础功底简直呵呵。我感觉<strong>这种差距在无意中被越拉越大，直至彻底甩开</strong>。个人庆幸能够意识到这一点，还不算太晚。保持清醒的头脑，不要过于沉浸在自己的圈子之中。保持谦逊，在广阔的天地之中自己仅仅是一粒毫不起眼的沙子罢了。<strong>每次要懈怠的时候记住想想上面的可怕现实。</strong></p>
<p>上面的现实也与<strong>视野的差距</strong>有关联。举个极端的例子，对比两类人，同样是努力，给一个月时间，第一类人只是对着一本浅显的教材自学编程；另外一类人处在一个奋进的团队中，导师要求他们一个月完成一整个系统的搭建。如果同样是零基础，最后哪个人会更加出色？毫无疑问，第二类人会远远甩开第一类人。由于压力和接触的事物的高度，第二类人不得不提高自己的认知水平以适应变化，自然收获更多。一个认识的工作室的师兄告诉我，加入工作室有一个好处就是可以提高个人的视野，对行业的认识。这就是视野的重要性。这是许多时候大学带给我们的，或许<strong>大学之间的差距就是提供更广阔视野能力的差距</strong>吧。<br>临近考试，有感而发，写下这篇文章记录纷杂的心情，希望自己能够找到大学的意义，明确自己的方向。有点鸡汤的意味了……如果有小伙伴看到也可以在下面抒发一下感情……</p>
<p>记下此文以自勉</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/06/25/时隔一年高考所感所想/" data-id="cir1zx7dr002dxgyual8ey068" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/原创/">原创</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/心情/">心情</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Square全家桶正传——Retrofit使用及配合RxJava实现最大效率开发" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/06/21/Square全家桶正传——Retrofit使用及配合RxJava实现最大效率开发/" class="article-date">
  <time datetime="2016-06-21T15:06:11.000Z" itemprop="datePublished">2016-06-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Android快速开发/">Android快速开发</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/21/Square全家桶正传——Retrofit使用及配合RxJava实现最大效率开发/">Square全家桶正传——Retrofit使用及配合RxJava实现最大效率开发</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>写作原因：Retrofit被许多安卓程序员称为当下最优秀的网络请求框架，是Square重要的成员之一。相比传统的网络请求框架，Retrofit更加优秀。所以学习使用Retrofit有重要的意义。此外结合上RxJava使用可以使请求代码逻辑更加清晰。下面一起走进Retrofit的世界。</strong></p>
<p><a href="http://square.github.io/retrofit/" target="_blank" rel="external">http://square.github.io/retrofit/</a></p>
<p><a href="https://github.com/square/retrofit/" target="_blank" rel="external">https://github.com/square/retrofit/</a></p>
<hr>
<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>Retrofit是Square推出的一款用于网络请求的框架。官方对其定义为”A type-safe HTTP client for Android and Java”。在Retrofit之前，我们请求网络数据采用的是AsyncTask+HttpURLConnection（或者HttpClient）+JsonObject，可想而知重复性工作量之大；之后Volley框架出现，但是Volley对于大数据的请求非常糟糕；Okhttp足够优秀，事实上Retrofit网络情求部分的实现基于Okhttp完成。此外Retrofit利用接口、方法和注解将网络请求直接转化为Java对象（POJO），类似数据库ORM模式。下面结合调用银行卡数据API接口的实例简述一下Retrofit的使用。</p>
<p>先添加项目依赖：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">compile &apos;com.squareup.retrofit2:retrofit:2.1.0&apos;</span><br><span class="line">compile &apos;com.squareup.retrofit:converter-gson:2.1.0&apos;  </span><br><span class="line">compile &apos;com.squareup.retrofit2:adapter-rxjava:2.1.0&apos;</span><br><span class="line">compile &apos;com.squareup.okhttp3:okhttp:3.3.1&apos;</span><br></pre></td></tr></table></figure></p>
<p>此外需要配置一下RxJava，关于RxJava配置与基本使用移步：<br><a href="http://roadtogeek.cn/2016/05/25/Square%E5%85%A8%E5%AE%B6%E6%A1%B6%E5%89%8D%E4%BC%A0%E2%80%94%E2%80%94RxJava%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8%EF%BC%88%E4%B8%80%EF%BC%89/" target="_blank" rel="external">Square全家桶前传——RxJava函数式编程入门（一）</a></p>
<h2 id="Retrofit基本使用"><a href="#Retrofit基本使用" class="headerlink" title="Retrofit基本使用"></a>Retrofit基本使用</h2><h3 id="整体思路（此部分建议结合实例同时阅读）："><a href="#整体思路（此部分建议结合实例同时阅读）：" class="headerlink" title="整体思路（此部分建议结合实例同时阅读）："></a>整体思路（此部分建议结合实例同时阅读）：</h3><p>1.创建请求接口：以GET为例，把客户端希望向服务器端发送的请求封装成接口的形式。模板如下：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public interface RequestService &#123;</span><br><span class="line">   @GET(&quot;请求具体地址&quot;)</span><br><span class="line">   Call&lt;ResInfo&gt; getResInfo(@header(&quot;apikey&quot;) String apikey,</span><br><span class="line">                             @Query(&quot;cardnum&quot;) String cardNum);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>具体地址指的是URL主机后面的部分，然后新建一个以请求需要的参数作为形参的方法，返回值为Call类型的泛型。请求参数使用注解转化为形参，如：<code>@Query(&quot;type&quot;) String type。</code>如果请求无需参数如下：<br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@GET(&quot;/record&quot;)</span><br><span class="line">Call&lt;PhoneResult&gt; getResult();</span><br></pre></td></tr></table></figure></p>
<p>这里介绍一下请求参数内的常用的几个注解，根据请求接口的格式灵活选择需要的注解：</p>
<p>  @header(“apikey”) String apikey 用于接口请求数据的版本，设备信息，用户id，apikey等;</p>
<p>  @Query(“apikey”) String apikey 用于接口键值对类型参数，eg:cardnum=”123456789”;</p>
<p>  @Body：Java对象;</p>
<p>@Path(“id”) String id<br>用于直接请求数据的情况，如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@GET(&quot;/result/&#123;id&#125;&quot;)</span><br><span class="line">Call&lt;PhoneResult&gt; getResult(@Path(&quot;id&quot;) String id);</span><br></pre></td></tr></table></figure></p>
<p>2.创建请求Response JSON对象的实体类：</p>
<p>个人喜欢使用GsonFormat插件来生成JSON对象对应的Java实体类对象，关于GsonFormat的用法这里不多阐述了，由于下文仍然要用到这个实体类，假设获得的实体类名为：ResInfo.class。</p>
<p>2.创建Retrofit对象<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Retrofit retrofit = new Retrofit.Builder()</span><br><span class="line">               .baseUrl(baseUrl)</span><br><span class="line">               .addConverterFactory(GsonConverterFactory.create())</span><br><span class="line">               .build();</span><br></pre></td></tr></table></figure></p>
<p>  除了使用Gson来解析，还可以使用下面这些解析库进行解析：</p>
<pre><code>Converter    Library
Gson    com.squareup.retrofit:converter-gson:2.0.0-beta2
Jackson    com.squareup.retrofit:converter-jackson:2.0.0-beta1
Moshi    com.squareup.retrofit:converter-moshi:2.0.0-beta1
Protobuf    com.squareup.retrofit:converter-protobuf:2.0.0-beta1
Wire    com.squareup.retrofit:converter-wire:2.0.0-beta1
Simple XML    com.squareup.retrofit:converter-simplexml:2.0.0-beta1
</code></pre><p>3.通过Retrofit对象来实现请求接口赋予其具体的功能：<br>    <code>RequestService service = retrofit.create(RequestService.class);</code></p>
<p>4.现在接口已经实现，调用接口我们定义的内部方法获得Call对象：<br>    <code>Call&lt;ResInfo&gt; call = service.getResInfo(apiKey,&quot;cardNum&quot;);</code></p>
<p>5.调用Call对象的enqueue方法，将Call对象放入请求队列中：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">call.enqueue(new Callback&lt;ResInfo&gt;() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void onResponse(Call&lt;ResInfo&gt; call, Response&lt;ResInfo&gt; response) &#123;</span><br><span class="line">                ResInfo resInfo = response.body();</span><br><span class="line">                Log.i(&quot;way&quot;,&quot;Your card name is:&quot; + resInfo.data.cardname);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            public void onFailure(Call&lt;ResInfo&gt; call, Throwable t) &#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure></p>
<p>注意在onResponse中的response是返回的JSON对象，可以将其取出。</p>
<h3 id="具体例子"><a href="#具体例子" class="headerlink" title="具体例子"></a>具体例子</h3><p>  下面我给出调用百度API查询银行卡信息的例子，结合上文的总结自己分析便可更好地理解Retrofit的用法。</p>
<p>1.项目结构</p>
<p><img src="http://7xszli.com1.z0.glb.clouddn.com/Retrofit1.PNG" alt="Retrofit1"></p>
<p>2.具体代码</p>
<p>MainActivity.java<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">package com.example.vincebarry.retrofitdemo;</span><br><span class="line"></span><br><span class="line">import android.support.v7.app.AppCompatActivity;</span><br><span class="line">import android.os.Bundle;</span><br><span class="line">import android.util.Log;</span><br><span class="line"></span><br><span class="line">import retrofit2.Call;</span><br><span class="line">import retrofit2.Callback;</span><br><span class="line">import retrofit2.GsonConverterFactory;</span><br><span class="line">import retrofit2.Response;</span><br><span class="line">import retrofit2.Retrofit;</span><br><span class="line"></span><br><span class="line">public class MainActivity extends AppCompatActivity &#123;</span><br><span class="line">    private final static String baseUrl = &quot;http://apis.baidu.com&quot;;</span><br><span class="line">    private final static String apiKey = &quot;yourAPIKey&quot;;</span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        Retrofit retrofit = new Retrofit.Builder()</span><br><span class="line">                .baseUrl(baseUrl)</span><br><span class="line">                .addConverterFactory(GsonConverterFactory.create())</span><br><span class="line">                .build();</span><br><span class="line">        RequestService service = retrofit.create(RequestService.class);</span><br><span class="line">        Call&lt;ResInfo&gt; call = service.getResInfo(apiKey,&quot;cardNum&quot;);</span><br><span class="line">        call.enqueue(new Callback&lt;ResInfo&gt;() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void onResponse(Call&lt;ResInfo&gt; call, Response&lt;ResInfo&gt; response) &#123;</span><br><span class="line">                ResInfo resInfo = response.body();</span><br><span class="line">                Log.i(&quot;way&quot;,&quot;Your card name is:&quot; + resInfo.data.cardname);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            public void onFailure(Call&lt;ResInfo&gt; call, Throwable t) &#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>RequestService.java<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">package com.example.vincebarry.retrofitdemo;</span><br><span class="line"></span><br><span class="line">import retrofit2.Call;</span><br><span class="line">import retrofit2.http.GET;</span><br><span class="line">import retrofit2.http.Query;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">public interface RequestService &#123;</span><br><span class="line">    @GET(&quot;/datatiny/cardinfo/cardinfo&quot;)</span><br><span class="line">    Call&lt;ResInfo&gt; getResInfo(@Query(&quot;apikey&quot;) String apikey,</span><br><span class="line">                              @Query(&quot;cardnum&quot;) String cardNum);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ResInfo.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">package com.example.vincebarry.retrofitdemo;</span><br><span class="line"></span><br><span class="line">import com.google.gson.Gson;</span><br><span class="line">import com.google.gson.reflect.TypeToken;</span><br><span class="line"></span><br><span class="line">import org.json.JSONException;</span><br><span class="line">import org.json.JSONObject;</span><br><span class="line"></span><br><span class="line">import java.lang.reflect.Type;</span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">public class ResInfo &#123;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * status : 1</span><br><span class="line">     * data : &#123;&quot;cardtype&quot;:&quot;贷记卡&quot;,&quot;cardlength&quot;:16,&quot;cardprefixnum&quot;:&quot;518710&quot;,&quot;cardname&quot;:&quot;MASTER信用卡&quot;,&quot;bankname&quot;:&quot;招商银行信用卡中心&quot;,&quot;banknum&quot;:&quot;03080010&quot;&#125;</span><br><span class="line">     */</span><br><span class="line"></span><br><span class="line">    public int status;</span><br><span class="line">    /**</span><br><span class="line">     * cardtype : 贷记卡</span><br><span class="line">     * cardlength : 16</span><br><span class="line">     * cardprefixnum : 518710</span><br><span class="line">     * cardname : MASTER信用卡</span><br><span class="line">     * bankname : 招商银行信用卡中心</span><br><span class="line">     * banknum : 03080010</span><br><span class="line">     */</span><br><span class="line"></span><br><span class="line">    public DataBean data;</span><br><span class="line"></span><br><span class="line">    public static List&lt;ResInfo&gt; arrayResInfoFromData(String str, String key) &#123;</span><br><span class="line"></span><br><span class="line">        try &#123;</span><br><span class="line">            JSONObject jsonObject = new JSONObject(str);</span><br><span class="line">            Type listType = new TypeToken&lt;ArrayList&lt;ResInfo&gt;&gt;() &#123;</span><br><span class="line">            &#125;.getType();</span><br><span class="line"></span><br><span class="line">            return new Gson().fromJson(jsonObject.getString(str), listType);</span><br><span class="line"></span><br><span class="line">        &#125; catch (JSONException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return new ArrayList();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static class DataBean &#123;</span><br><span class="line">        public String cardtype;</span><br><span class="line">        public int cardlength;</span><br><span class="line">        public String cardprefixnum;</span><br><span class="line">        public String cardname;</span><br><span class="line">        public String bankname;</span><br><span class="line">        public String banknum;</span><br><span class="line"></span><br><span class="line">        public static List&lt;DataBean&gt; arrayDataBeanFromData(String str, String key) &#123;</span><br><span class="line"></span><br><span class="line">            try &#123;</span><br><span class="line">                JSONObject jsonObject = new JSONObject(str);</span><br><span class="line">                Type listType = new TypeToken&lt;ArrayList&lt;DataBean&gt;&gt;() &#123;</span><br><span class="line">                &#125;.getType();</span><br><span class="line"></span><br><span class="line">                return new Gson().fromJson(jsonObject.getString(str), listType);</span><br><span class="line"></span><br><span class="line">            &#125; catch (JSONException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            return new ArrayList();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面是Retrofit的一般使用方法，下面介绍一下将RxJava和Retrofit结合使用的方法。如果真正掌握两者的结合，外加Picasso的辅助，可以解决大部分网络请求问题：</p>
<h2 id="结合RxJava使用"><a href="#结合RxJava使用" class="headerlink" title="结合RxJava使用"></a>结合RxJava使用</h2><p>1.定义接口：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">   		interface RequestService &#123;</span><br><span class="line">			@GET(&quot;user/login&quot; )</span><br><span class="line">			Observable&lt;ResInfo&gt; getResInfo(</span><br><span class="line">       			@header(&quot;apikey&quot;) String apikey,</span><br><span class="line">                 @Query(&quot;cardnum&quot;) String cardNum</span><br><span class="line">			);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>注意这里返回的不再是Call对象而是Observable对象，及RxJava中的事件源。</strong></p>
<p>2.创建Retrofit对象，实现接口：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Retrofit retrofit = new Retrofit.Builder()</span><br><span class="line">          .addConverterFactory(GsonConverterFactory.create())</span><br><span class="line">          .addCallAdapterFactory(RxJavaCallAdapterFactory.create())</span><br><span class="line">          .baseUrl(baseURL)</span><br><span class="line">          .build();</span><br><span class="line">    	RequestService service = retrofit.create(RequestService.class);</span><br></pre></td></tr></table></figure></p>
<p>注意加入.addCallAdapterFactory(RxJavaCallAdapterFactory.create())配置RxJava。</p>
<p>3.调用接口我们定义的内部方法获得事件源：</p>
<p><code>Observable&lt;ResInfo&gt; call = service.getResInfo(apiKey,&quot;cardNum&quot;);</code></p>
<p>4.下面就是熟悉的RxJava函数式编程了：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">call.subscribeOn(Schedulers.newThread())//请求在新的线程中执行</span><br><span class="line">           .observeOn(Schedulers.io())         //请求完成后在io线程中执行</span><br><span class="line">           .doOnNext(new Action1&lt;ResInfo&gt;() &#123;</span><br><span class="line">               @Override</span><br><span class="line">               public void call(ResInfo resInfo) &#123;</span><br><span class="line">                   //操作</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;)</span><br><span class="line">           .observeOn(AndroidSchedulers.mainThread())//最后在主线程中执行</span><br><span class="line">           .subscribe(new Subscriber&lt;UserInfo&gt;() &#123;</span><br><span class="line">               @Override</span><br><span class="line">               public void onCompleted() &#123;</span><br><span class="line"></span><br><span class="line">               &#125;</span><br><span class="line"></span><br><span class="line">               @Override</span><br><span class="line">               public void onError(Throwable e) &#123;</span><br><span class="line">                   //请求失败</span><br><span class="line">               &#125;</span><br><span class="line"></span><br><span class="line">               @Override</span><br><span class="line">               public void onNext(UserInfo userInfo) &#123;</span><br><span class="line">                   //请求成功</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;);</span><br></pre></td></tr></table></figure></p>
<p>上面的doOnNext()是在每次输出一个元素之前做一些额外的事情，比如可以保存数据等等。</p>
<h2 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h2><p>到此我将Retrofit的使用的流程和个人对Retrofit的理解梳理了一遍，希望上面的例子和总结能够帮助大家更好地理解Retrofit的使用。更多的Square同系列文章可以关注我的博客。还有什么见解或是文中有某些错误希望大家提出，谢谢。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/06/21/Square全家桶正传——Retrofit使用及配合RxJava实现最大效率开发/" data-id="cir1zx7cb000wxgyu3sjgfjlu" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/原创/">原创</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-为AS化化妆——AS主题下载网站及样式基本配置" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/06/18/为AS化化妆——AS主题下载网站及样式基本配置/" class="article-date">
  <time datetime="2016-06-18T14:38:16.000Z" itemprop="datePublished">2016-06-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Android-Studio/">Android Studio</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/18/为AS化化妆——AS主题下载网站及样式基本配置/">为AS化化妆——AS主题下载网站及样式基本配置</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>写作原因：作为一名安卓程序员，毫无疑问每天接触最多的就是AS了（Eclipse现在应该没人用了吧……如果用Eclipse的建议换AS了）。Android程序员与AS相处的时间甚至超过了与女票相处的时间（身为单身猿的博主默默流下了一行眼泪）。那么装扮一下每天一起开心一起流泪，与我们肝胆相照的AS是很有必要的。不说了，好心酸……下面推荐一下今天的两大主角吧。</strong></p>
<p>字体推荐来源：<a href="http://www.zhihu.com/question/20299865?rf=22041107" target="_blank" rel="external">http://www.zhihu.com/question/20299865?rf=22041107</a></p>
<hr>
<h2 id="AS的整体主题风格修改神器：Color-Themes"><a href="#AS的整体主题风格修改神器：Color-Themes" class="headerlink" title="AS的整体主题风格修改神器：Color Themes"></a>AS的整体主题风格修改神器：Color Themes</h2><p><img src="http://7xszli.com1.z0.glb.clouddn.com/colortheme1.PNG" alt="ct1"></p>
<p><img src="http://7xszli.com1.z0.glb.clouddn.com/colortheme1.PNG" alt="ct2"></p>
<p>Color Themes网址：<a href="http://color-themes.com/?view=index" target="_blank" rel="external">http://color-themes.com/?view=index</a></p>
<p>这是一个收集了大量Jetbrains亲儿子们的主题的网站，像而Android Studio作为IntelliJ IDEA的衍生品自然也能使用这些主题啦。在里面找到自己喜欢的主题风格然后选择下载到本地。</p>
<p>接着在AS中菜单项选择<strong>File-&gt;Import Settings</strong>选择你下载的主题的jar包，重启一下就行啦……</p>
<p>什么，字体太小太难看，先推荐五款适合Coder的漂亮的字体：</p>
<p><strong>Monaco（个人推荐）</strong></p>
<p><img src="https://pic4.zhimg.com/677bbbadcd49e687498a0ca1c020f747_b.jpg" alt=""></p>
<p><strong>Consolas</strong></p>
<p><img src="https://pic3.zhimg.com/608bebfb111b14f8dac92150b51a77c2_b.jpg" alt=""></p>
<p><strong>Courier</strong></p>
<p><img src="https://pic2.zhimg.com/d2f2ec5b91df7e6ddcc8955b3a1e0579_b.jpg" alt=""></p>
<p><strong>Camingo Code</strong></p>
<p><img src="https://pic2.zhimg.com/d9563c7a3dfe4ee34d582146c3f7b815_b.png" alt=""></p>
<p><strong>Source Code Pro</strong></p>
<p><img src="https://pic1.zhimg.com/f9c3531215e49951c92a64d00e0efd0c_b.jpg" alt=""></p>
<h2 id="修改字体样式"><a href="#修改字体样式" class="headerlink" title="修改字体样式"></a>修改字体样式</h2><p>点击File-&gt;Settings，选择Color&amp;Fonts下的Font，将Show only monospaced fonts选项去掉，更改Primary font为自己想要的字体，后面两个分别为字体大小和行宽。更多的设置这里就不阐述啦，有兴趣自己研究研究。</p>
<h2 id="修改编辑器背景"><a href="#修改编辑器背景" class="headerlink" title="修改编辑器背景"></a>修改编辑器背景</h2><p>最后放出两个堪称神器的插件：sexy editor和Material Theme UI,sexy editor名字虽然有点wu，但是当我一配置完并使用上它以后，瞬间被这个插件的效果所震撼到。有了这个插件从此告别清一色的黑色（白色）背景，自己可以选择喜欢的图片作为背景。加上Material UI，IDE的图标立马变成安卓猿喜欢的Material Design的样式。我个人十分喜欢MD规范的设计，下面放出我的IDE的展示，怎样？还不错吧。<br><img src="http://7xszli.com1.z0.glb.clouddn.com/colortheme3.PNG" alt=""></p>
<p><strong>怎么样？经过这三步修改，我们的AS瞬间高大上了许多有没有？欢迎吐槽</strong></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/06/18/为AS化化妆——AS主题下载网站及样式基本配置/" data-id="cir1zx7dl0025xgyuqkuuyi9p" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/原创/">原创</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Square全家桶正传——偷懒神器ButterKnife及其附属插件的使用" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/06/16/Square全家桶正传——偷懒神器ButterKnife及其附属插件的使用/" class="article-date">
  <time datetime="2016-06-16T08:36:20.000Z" itemprop="datePublished">2016-06-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Android快速开发/">Android快速开发</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/16/Square全家桶正传——偷懒神器ButterKnife及其附属插件的使用/">Square全家桶正传——偷懒神器ButterKnife及其附属插件的使用</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>写作原因：程序员喜欢偷懒，对于安卓程序员来说，把时间花在不用动脑筋的findViewById()上简直让人难以忍受。此外大量的点击监听事件的分散化使得代码可读性下降。于是，基于注解的ButterKnife应运而生。</strong></p>
<p><strong>参考链接：</strong></p>
<p>ButterKnife官网：<a href="http://jakewharton.github.io/butterknife/" target="_blank" rel="external">http://jakewharton.github.io/butterknife/</a></p>
<p>ButterKnife GitHub地址：<a href="https://github.com/JakeWharton/butterknife" target="_blank" rel="external">https://github.com/JakeWharton/butterknife</a></p>
<p>ButterKnife-Zelezny地址：<a href="https://github.com/avast/android-butterknife-zelezny" target="_blank" rel="external">https://github.com/avast/android-butterknife-zelezny</a></p>
<hr>
<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>先来看看ButterKnife有哪些功能吧，官网上是这样描述的：</p>
<ol>
<li>通过使用@BindView来消除调用findViewById()；</li>
<li>可以把多个View放在一个数组或者list中。然后一次性可以同时对这些View的动作，属性等进行操作；</li>
<li>通过使用@OnClick注解来消除由监听器带来的匿名内部类；</li>
<li>通过对resource进行注解来消除多余的资源查找代码。</li>
</ol>
<h2 id="获取ButterKnife："><a href="#获取ButterKnife：" class="headerlink" title="获取ButterKnife："></a>获取ButterKnife：</h2><ol>
<li><p>在你的项目的build.gradle中加入以下依赖：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">buildscript &#123;</span><br><span class="line">  repositories &#123;</span><br><span class="line">    mavenCentral()</span><br><span class="line">   &#125;</span><br><span class="line">  dependencies &#123;</span><br><span class="line">    classpath &apos;com.neenbedankt.gradle.plugins:android-apt:1.8&apos;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在你的Module的build.gradle中加入以下依赖：</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">apply plugin: &apos;android-apt&apos;</span><br><span class="line"></span><br><span class="line">android &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">  compile &apos;com.jakewharton:butterknife:8.1.0&apos;</span><br><span class="line">  apt &apos;com.jakewharton:butterknife-compiler:8.1.0&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>注意：apply plugin: ‘android-apt’</strong></p>
<h1 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h1><p>下面的代码演示了ButterKnife的基本使用技巧：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">class ExampleActivity extends Activity &#123;</span><br><span class="line">  @BindView(R.id.user) EditText username;</span><br><span class="line">  @BindView(R.id.pass) EditText password;</span><br><span class="line"></span><br><span class="line">  @BindString(R.string.login_error) String loginErrorMessage;</span><br><span class="line"></span><br><span class="line">  @OnClick(R.id.submit) void submit() &#123;</span><br><span class="line">    // TODO call server...</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @Override public void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">    super.onCreate(savedInstanceState);</span><br><span class="line">    setContentView(R.layout.simple_activity);</span><br><span class="line">    ButterKnife.bind(this);</span><br><span class="line">    // TODO Use fields...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>包括以下几个步骤：</p>
<p>1.定义UnBinder对象，对待操作元素进行注解：</p>
<p>定义：<code>private UnBinder unBinder;</code></p>
<p>对View：<code>@BindView(R.id.user) EditText username;</code></p>
<p>对Resource：<code>@BindString(R.string.login_error) String loginErrorMessage;</code></p>
<p><strong>（注：资源绑定有以下注解：@BindBool, @BindColor, @BindDimen, @BindDrawable, @BindInt, @BindString）</strong></p>
<p>对监听事件：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@OnClick(R.id.submit) void submit() &#123;</span><br><span class="line">  // TODO call server...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>2.在onCreate方法或者onCreateView方法中调用方法：</p>
<p><code>unBinder = ButterKnife.bind(this);//如果在Fragment中使用ButterKnife.bind(this,view);</code></p>
<p>3.在onDestory方法或者onDestoryView中解除绑定：</p>
<p><code>unBinder = ButterKnife.unbind();</code></p>
<h1 id="进阶操作："><a href="#进阶操作：" class="headerlink" title="进阶操作："></a>进阶操作：</h1><h2 id="1-利用ViewList实现同时配置多个View："><a href="#1-利用ViewList实现同时配置多个View：" class="headerlink" title="1.利用ViewList实现同时配置多个View："></a>1.利用ViewList实现同时配置多个View：</h2><p>①. 将多个View绑定到一个List中：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@BindViews(&#123; R.id.first_name, R.id.middle_name, R.id.last_name &#125;)</span><br><span class="line">List&lt;EditText&gt; nameViews;</span><br></pre></td></tr></table></figure></p>
<p>②. 调用ButterKnife.apply()方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ButterKnife.apply(nameViews, DISABLE);</span><br><span class="line">ButterKnife.apply(nameViews, ENABLED, false);</span><br><span class="line">ButterKnife.apply(nameViews, View.ALPHA, 0.0f);</span><br></pre></td></tr></table></figure></p>
<p>按照官网的思路，上面三行分别是对nameViews中所有View的action，Setter和Property的设置，但是仅仅调用了apply()方法并不能真正修改nameViews中的View，必须完成下一步工作。</p>
<p>③. 实现接口：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">static final ButterKnife.Action&lt;View&gt; DISABLE = new ButterKnife.Action&lt;View&gt;() &#123;</span><br><span class="line">  @Override public void apply(View view, int index) &#123;</span><br><span class="line">    view.setEnabled(false);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">static final ButterKnife.Setter&lt;View, Boolean&gt; ENABLED = new ButterKnife.Setter&lt;View, Boolean&gt;() &#123;</span><br><span class="line">  @Override public void set(View view, Boolean value, int index) &#123;</span><br><span class="line">    view.setEnabled(value);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>上面代码已经将action和Setter实现，重写接口内部方法apply或set，在内部实现对nameViews的操作。这样就完成了同时操作多个View的功能。</p>
<h2 id="2-利用形参直接对当前View进行操作"><a href="#2-利用形参直接对当前View进行操作" class="headerlink" title="2. 利用形参直接对当前View进行操作"></a>2. 利用形参直接对当前View进行操作</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@OnClick(R.id.submit)</span><br><span class="line">public void sayHi(Button button) &#123;</span><br><span class="line">  button.setText(&quot;Hello!&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-实现多View点击事件的关联（原理同2）"><a href="#3-实现多View点击事件的关联（原理同2）" class="headerlink" title="3. 实现多View点击事件的关联（原理同2）"></a>3. 实现多View点击事件的关联（原理同2）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@OnClick(&#123; R.id.door1, R.id.door2, R.id.door3 &#125;)</span><br><span class="line">public void pickDoor(DoorView door) &#123;</span><br><span class="line">  if (door.hasPrizeBehind()) &#123;</span><br><span class="line">    Toast.makeText(this, &quot;You win!&quot;, LENGTH_SHORT).show();</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    Toast.makeText(this, &quot;Try again&quot;, LENGTH_SHORT).show();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-防止目标View不存在出现exception的请况的发生"><a href="#4-防止目标View不存在出现exception的请况的发生" class="headerlink" title="4.防止目标View不存在出现exception的请况的发生"></a>4.防止目标View不存在出现exception的请况的发生</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@Nullable @BindView(R.id.might_not_be_there) TextView mightNotBeThere;</span><br><span class="line"></span><br><span class="line">@Optional @OnClick(R.id.maybe_missing) void onMaybeMissingClicked() &#123;</span><br><span class="line">  // TODO ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>通过使用@Nullable或者@Optional实现防止因为目标View不存在出现exception的请况的发生。</p>
<h2 id="5-代替onItemClickListener的注解实现"><a href="#5-代替onItemClickListener的注解实现" class="headerlink" title="5. 代替onItemClickListener的注解实现"></a>5. 代替onItemClickListener的注解实现</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@OnItemSelected(R.id.list_view)</span><br><span class="line">void onItemSelected(int position) &#123;</span><br><span class="line">  // TODO ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="6-通过LayoutInflater获取View的ButterKnife实现方法findById："><a href="#6-通过LayoutInflater获取View的ButterKnife实现方法findById：" class="headerlink" title="6. 通过LayoutInflater获取View的ButterKnife实现方法findById："></a>6. 通过LayoutInflater获取View的ButterKnife实现方法findById：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">View view = LayoutInflater.from(context).inflate(R.layout.thing, null);</span><br><span class="line">TextView firstName = ButterKnife.findById(view, R.id.first_name);</span><br><span class="line">TextView lastName = ButterKnife.findById(view, R.id.last_name);</span><br><span class="line">ImageView photo = ButterKnife.findById(view, R.id.photo);</span><br></pre></td></tr></table></figure>
<p>注：这个真没觉得哪里简单了。。。</p>
<p>到此我们讲完了ButterKnife的基本使用。怎样不错吧？下面有更强大的东西——ButterKnifeZelezny，配合着这个神器一起使用，可以为我们的项目节省大量时间和增加代码可读性。</p>
<h1 id="ButterKnifeZelezny"><a href="#ButterKnifeZelezny" class="headerlink" title="ButterKnifeZelezny"></a>ButterKnifeZelezny</h1><h2 id="下载地址："><a href="#下载地址：" class="headerlink" title="下载地址："></a>下载地址：</h2><p><a href="http://plugins.jetbrains.com/plugin/7369" target="_blank" rel="external">http://plugins.jetbrains.com/plugin/7369</a></p>
<p>关于AS安装插件的问题在这里不多阐述了，不会的自行百度。</p>
<h2 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h2><p>下面这幅图展示了ButterKnifeZelezny的基本用法。<br><img src="https://github.com/avast/android-butterknife-zelezny/blob/master/img/zelezny_animated.gif?raw=true" alt="bkz"></p>
<p>基本步骤：</p>
<ol>
<li>有所使用的布局 ID 上点击右键 (例如上图中的 R.layout.activity_settings )， 然后选择 Generate -&gt; Generate ButterKnife Injections</li>
<li>在对话框中选择需要注入的 View， 还有个选项可以给 Adapter 创建一个 ViewHolder。</li>
<li>点击 Confirm ， 代码自动生成！</li>
</ol>
<h1 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h1><p>本文只是关于ButterKnife用法的介绍，关于Java中的依赖注解的知识博主仍在学习中，有兴趣参照《Java编程思想》一书关于Annotation的介绍，此外欢迎继续关注博主的Square全家桶系列。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/06/16/Square全家桶正传——偷懒神器ButterKnife及其附属插件的使用/" data-id="cir1zx7da001txgyufztk000e" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/原创/">原创</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Javaer学习Python之路（一）" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/06/16/Javaer学习Python之路（一）/" class="article-date">
  <time datetime="2016-06-16T06:32:01.000Z" itemprop="datePublished">2016-06-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Python基础知识/">Python基础知识</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/16/Javaer学习Python之路（一）/">Javaer学习Python之路（一）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>写作原因：学习前总得有个目的，我为什么想学习Python？第一，是被大量的网络爬虫给吸引了，网络爬虫真的很酷，自己有实现它的想法，这是学习Python的初衷（虽然Java也可以实现爬虫）；第二，作为一个Coder不能只局限只会两门语言（C和Java），而且C语言个人并没有使用的需求，俗话说技多不压身嘛，除了重量级语言，学习一门脚本语言也是有必要的；第三，被Python的优雅简洁的语法所吸引；第四，为后面学习后台做一些铺垫。总之，学习Python有许多好处。这是我这个系列笔记出现的原因。这个系列笔记从java程序员的角度切入，有些地方会与java进行类比。</strong></p>
<hr>
<p>这节内容包括Python简介到集合部分。下面开始吧。</p>
<h2 id="一、Python的定义："><a href="#一、Python的定义：" class="headerlink" title="一、Python的定义："></a>一、Python的定义：</h2><p>一门面向对象的简洁优雅的解释型语言。</p>
<h2 id="二、Python的用处："><a href="#二、Python的用处：" class="headerlink" title="二、Python的用处："></a>二、Python的用处：</h2><p>网站开发，科学计算，爬虫，日常工具等等</p>
<h2 id="三、Python的优缺点："><a href="#三、Python的优缺点：" class="headerlink" title="三、Python的优缺点："></a>三、Python的优缺点：</h2><p>优点：语法简洁强大，有大量的内置库和第三方库，方便快速开发；<br>缺点：运行速度慢（只是相对编程语言而言，实际上不明显）<br>代码不能加密（脚本语言）</p>
<h2 id="四、编译环境配置"><a href="#四、编译环境配置" class="headerlink" title="四、编译环境配置"></a>四、编译环境配置</h2><p>这里提供下载链接：<br>Python最新版本下载：<a href="https://www.python.org/downloads/" target="_blank" rel="external">https://www.python.org/downloads/</a></p>
<p>pip下载（关于pip后文讲述）：<a href="https://bootstrap.pypa.io/get-pip.py" target="_blank" rel="external">https://bootstrap.pypa.io/get-pip.py</a></p>
<h2 id="五、输入输出函数："><a href="#五、输入输出函数：" class="headerlink" title="五、输入输出函数："></a>五、输入输出函数：</h2><h3 id="输出："><a href="#输出：" class="headerlink" title="输出："></a>输出：</h3><p>单字符串：<br>  <code>print(&#39;Hello World!&#39;)</code></p>
<p>多字符串：<br>  <code>print(&#39;Hello&#39;,&#39;World!&#39;)//遇到逗号“,”会输出一个空格</code></p>
<p>整数：</p>
<p>  <code>print(300) OR print(100+200)//显示都是300</code></p>
<h3 id="输入："><a href="#输入：" class="headerlink" title="输入："></a>输入：</h3><p>基本格式：<br>  <code>value = input() //此时输入后value默认为字符串类型</code></p>
<p>输入提示：<br>  <code>value = input(&#39;Please input your value&#39;)</code></p>
<p>类型转换：<br>  上面注释说过，value默认为字符串类型，所以当你需要整数时，可以将之转换：<br>  <code>s = int(value)</code></p>
<h2 id="六、数据类型"><a href="#六、数据类型" class="headerlink" title="六、数据类型"></a>六、数据类型</h2><p>整数，浮点数操作与java类似，这里不详述了</p>
<p>字符串：字符串是以单引号’或双引号”括起来的任意文本，注意可以用单引号括起来。</p>
<p>转义字符：<br>字符串内部的’和”要使用转义字符来标示，如：<code>print(&#39;I\&#39;m ok.&#39;)</code><br>用<code>r&#39;&#39;</code>表示’’内部的字符串默认不转义<br><code>print(r&#39;\\\t\\&#39;) //显示结果：\\\t\\</code><br>用’’’…’’’的格式表示多行内容</p>
<p>编码相关：<br>  Python以Unicode编码<br>        ord()函数获取字符的整数表示，chr()函数把编码转换为对应的字符<br>        如果要在网络上传输，或者保存到磁盘上，就需要把str变为以字节为单位的bytes，对bytes类型的数据用带b前缀的单引号或双引号表示，如：x = b’ABC’；<br>        以Unicode表示的str通过encode()方法可以编码为指定的bytes，如：<br>     <code>&#39;ABC&#39;.encode(&#39;ascii&#39;) //显示结果：b&#39;ABC&#39;；&#39;中文&#39;.encode(&#39;utf-8&#39;) //显示结果：b&#39;\xe4\xb8\xad\xe6\x96\x87&#39;</code></p>
<p>反过来，如果我们从网络或磁盘上读取了字节流，那么读到的数据就是bytes。要把bytes变为str，就需要用decode()方法，如：<br><code>b&#39;ABC&#39;.decode(&#39;ascii&#39;)//显示结果：&#39;ABC&#39;； b&#39;\xe4\xb8\xad\xe6\x96\x87&#39;.decode(&#39;utf-8&#39;) //显示结果：&#39;中文&#39;</code></p>
<p>len()函数计算的是str的字符数，如果换成bytes，len()函数就计算字节数<br>    格式化：%d：整数；%f：浮点数；%s：字符串；%x：十六进制整数，如：<code>&#39;Hello, %s&#39; % &#39;world&#39;//显示结果：&#39;Hello, world&#39;</code></p>
<p>布尔运算：<br>与或非：and、or、not<br>空值：None（无意义）</p>
<h2 id="七、变量"><a href="#七、变量" class="headerlink" title="七、变量"></a>七、变量</h2><p>变量名：必须是大小写英文、数字和_的组合，且不能用数字开头</p>
<p>声明方式：<code>name = value；//将值赋给变量</code><br>由于Python是动态语言，所以同一个变量可以反复赋值，而且可以是不同类型的变量</p>
<h2 id="八、常量"><a href="#八、常量" class="headerlink" title="八、常量"></a>八、常量</h2><p>常量名：在Python中，通常用全部大写的变量名表示常量。常量是可以改变的，只是一种习惯性的用法</p>
<h2 id="九、运算"><a href="#九、运算" class="headerlink" title="九、运算"></a>九、运算</h2><p>普通除法：/ 结果为浮点数，如：<br><code>10 / 3 //显示结果为：3.3333333333333335</code></p>
<p>地板除法：// 结果为整数，如：<br>  <code>10//3 //显示结果为：3</code></p>
<h2 id="十、流程："><a href="#十、流程：" class="headerlink" title="十、流程："></a>十、流程：</h2><h3 id="条件："><a href="#条件：" class="headerlink" title="条件："></a>条件：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">  if 布尔表达式:</span><br><span class="line">--tab--表达式1</span><br><span class="line">--tab--表达式2</span><br><span class="line">elif 布尔表达式:</span><br><span class="line">--tab--表达式1</span><br><span class="line">--tab--表达式2</span><br><span class="line">else</span><br><span class="line">--tab--表达式1</span><br><span class="line">--tab--表达式2</span><br></pre></td></tr></table></figure>
<h3 id="循环："><a href="#循环：" class="headerlink" title="循环："></a>循环：</h3><p>第一种类型：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for 变量 in 集合//关于集合部分见下面阐述</span><br><span class="line">--tab--表达式1</span><br><span class="line">--tab--表达式2</span><br><span class="line">//range()可以生成整数序列</span><br></pre></td></tr></table></figure></p>
<p>第二种类型：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">while 布尔表达式:</span><br><span class="line">  		--tab--表达式1</span><br><span class="line">--tab--表达式2</span><br></pre></td></tr></table></figure></p>
<h2 id="十一、集合"><a href="#十一、集合" class="headerlink" title="十一、集合"></a>十一、集合</h2><h3 id="list"><a href="#list" class="headerlink" title="list"></a>list</h3><p>定义：list是一种有序的集合，可以随时添加和删除其中的元素。这跟java中的List集合相似。</p>
<p>声明：<code>classmates = [&#39;Michael&#39;, &#39;Bob&#39;, &#39;Tracy&#39;]</code></p>
<p>相关操作：</p>
<ol>
<li>获得list元素的个数：len()</li>
<li>访问list中的单个元素：classmates[0]<br><strong>注意：要取最后一个元素，除了计算索引位置外，还可以用-1做索引，直接获取最后一个元素。以此类推，可以获取倒数第2个（-2）、倒数第3个（-3）</strong></li>
<li>追加元素到末尾：classmates.append(‘Adam’)</li>
<li>把元素插入指定位置：classmates.insert(1, ‘Jack’)</li>
<li>删除list末尾的元素：pop()</li>
<li>删除指定位置的元素：pop(i)</li>
<li>把某个元素替换成别的元素：classmates[1] = ‘Sarah’</li>
</ol>
<h3 id="tuple"><a href="#tuple" class="headerlink" title="tuple"></a>tuple</h3><p>定义：有序列表，与list相似，但是一旦初始化就不能修改。</p>
<p>声明：<code>classmates = (&#39;Michael&#39;, &#39;Bob&#39;, &#39;Tracy&#39;)</code><br>    注意：如果要定义一个空的tuple，可以写成t=()，但是如果定义一个只有1个元素的tuple，必须写成t = (1,)</p>
<h3 id="dict"><a href="#dict" class="headerlink" title="dict"></a>dict</h3><p>定义：跟java中的map一样，使用键值对（Key-Value）存储</p>
<p>声明：<code>d = {&#39;Michael&#39;: 95, &#39;Bob&#39;: 75, &#39;Tracy&#39;: 85}</code><br><strong>（注：也可以通过key放入：d[‘Adam’] = 67，但是这样写必须先使用’Thomas’ in d或者d.get(‘Tomas’)判断key是否存在）</strong></p>
<p>基本操作：pop(key)<br><strong>注意：key必须为不可变对象。</strong></p>
<h3 id="set"><a href="#set" class="headerlink" title="set"></a>set</h3><p>定义：与dict类似，是一组key的集合，但不存储value。由于key不能重复，所以，在set中，没有重复的key。</p>
<p>声明：<code>s = set([1, 2, 3,3]) # 结果：s {1,2,3}</code></p>
<p>基本操作：与dict相似，另外set可以类比为集合，可以进行并集，交集等运算</p>
<p><strong>总结：本篇是Python最基础的语法，本系列下一篇将会引入函数的用法。</strong></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/06/16/Javaer学习Python之路（一）/" data-id="cir1zx7bx000ixgyuy2cy7c2a" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/">Python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/原创/">原创</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-动手撸一个金馆长表情库——爬虫及异步请求" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/06/04/动手撸一个金馆长表情库——爬虫及异步请求/" class="article-date">
  <time datetime="2016-06-04T02:22:42.000Z" itemprop="datePublished">2016-06-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Android-实战/">Android 实战</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/04/动手撸一个金馆长表情库——爬虫及异步请求/">动手撸一个金馆长表情库——爬虫及异步请求</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>前言：对于一些社交达人，微信或者QQ斗图几乎家常便饭。然而许多人手机里却只有那么几个表情，这样怎么在表情大战中取胜呢？不过不要忘了，我们是程序猿，没有弹药库自己造呗！于是就有了这篇文章。</strong></p>
<p>项目github地址：<a href="https://github.com/VinceBarry/BiaoQingLib" target="_blank" rel="external">https://github.com/VinceBarry/BiaoQingLib</a></p>
<hr>
<h2 id="功能展示"><a href="#功能展示" class="headerlink" title="功能展示"></a>功能展示</h2><p>先看看最终效果（重点在功能，界面我就不作美化了，有兴趣的自己做一些美化）</p>
<p><img src="http://7xszli.com1.z0.glb.clouddn.com/rxjsoup1.png" alt="pic1"></p>
<p><img src="http://7xszli.com1.z0.glb.clouddn.com/rxjsoup2.png" alt="pic2"></p>
<p>这个app一共包含700+张金馆长表情，当我点击某张图片时，能够将图片发送到微信，QQ或其他第三方平台上；当长按图片时，能够将图片保存到特定的文件夹中；点击底部按钮时能够加载更多表情。这里只是功能实现讲解，如果学会了以后要多少弹药只是加几行代码的事。心动了吗？下面开始吧。</p>
<h2 id="项目依赖"><a href="#项目依赖" class="headerlink" title="项目依赖"></a>项目依赖</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">compile files(&apos;libs/jsoup-1.9.2.jar&apos;)</span><br><span class="line">compile &apos;io.reactivex:rxjava:1.0.14&apos;</span><br><span class="line">compile &apos;io.reactivex:rxandroid:1.0.1&apos;</span><br><span class="line">compile &apos;com.squareup.picasso:picasso:2.5.2&apos;</span><br></pre></td></tr></table></figure>
<p>该项目需要用到上面几个库，分别是网络爬虫Jsoup，异步请求RxJava,RxAndroid和图片请求Picasso。对于每一个库的用法，RxJava可以翻阅我的上一篇博文，Picasso的用法我会在文中说明，相对简单；Jsoup参阅：<a href="http://www.open-open.com/jsoup/，" target="_blank" rel="external">http://www.open-open.com/jsoup/，</a> 写的很详细。这几个库是该项目的基础，一旦会用就可以开始撸了。</p>
<h2 id="具体实现"><a href="#具体实现" class="headerlink" title="具体实现"></a>具体实现</h2><h3 id="1-项目结构"><a href="#1-项目结构" class="headerlink" title="1.项目结构"></a>1.项目结构</h3><p>如图所示，由于项目较简单，我就没有分包了：</p>
<p><img src="http://7xszli.com1.z0.glb.clouddn.com/rxjsoup3.PNG" alt="pic3"></p>
<h3 id="2-界面布局"><a href="#2-界面布局" class="headerlink" title="2.界面布局"></a>2.界面布局</h3><p>本项目只有一个Activity，我们只要在布局文件中添加一个GridView和底部一个Button即可。然后在Activity中实例化，这里就不多说了。</p>
<h3 id="3-数据获取"><a href="#3-数据获取" class="headerlink" title="3.数据获取"></a>3.数据获取</h3><p>表情的数据来源于 <a href="http://qq.yh31.com/zjbq/0551964.html" target="_blank" rel="external">http://qq.yh31.com/zjbq/0551964.html</a> ，由于我们需要使用爬虫爬取表情的图片地址，所以先查看网页的源码，发现我们需要的表情图片地址为：<br><code>&lt;img src=&quot;/tp/zjbq/201606010944172985.jpg&quot; alt=&quot;&quot; /&gt;</code><br>于是就很明确了，我们先把img标签的部分过滤出来，但是img标签还有一部分图片不是我们所需的表情，如：<code>&lt;img class=&quot;pic2&quot; src=&quot;/tp/zjbq/201604041253139124.gif&quot;  width=&quot;150&quot; height=&quot;150&quot; alt=&quot;屌丝猴qq表情，关于屌丝猴的图片大全&quot; border=&quot;0&quot; /&gt;</code>。经过观察，发现不是我们所需的表情的img标签的class都为pic2，这样问题就解决了：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">try &#123;</span><br><span class="line">                                Document doc = Jsoup.connect(URL)</span><br><span class="line">                                        .timeout(3000)</span><br><span class="line">                                        .get();</span><br><span class="line">                                Elements elements = doc.getElementsByTag(&quot;img&quot;);</span><br><span class="line">                                for (Element e : elements) &#123;</span><br><span class="line">                                    if (!e.attr(&quot;class&quot;).toString().equals(&quot;pic2&quot;)) &#123;</span><br><span class="line">                                        //TODO:</span><br><span class="line">                                    &#125;</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125; catch (IOException e) &#123;</span><br><span class="line">                                e.printStackTrace();</span><br><span class="line">                            &#125;</span><br></pre></td></tr></table></figure></p>
<p>上面的代码便是网络爬虫的部分。先过滤出img标签的内容，然后二次筛选，筛去class为“pic2”的部分。上面代码中的TODO部分便可以对我们已经筛选的表情的Element进行处理，到此我们数据抓取成功。</p>
<h3 id="4-异步请求"><a href="#4-异步请求" class="headerlink" title="4.异步请求"></a>4.异步请求</h3><p>获取到的表情图片的地址是String类型，下面我们通过RxJava来实现异步请求并将数据加载（这部分如果不熟悉RxJava的童鞋也可以用Handler或者AsyncTask等等异步请求，这里不多说了）<br>首先创建事件源（下面的步骤跟上一篇文章类似），我把代码贴出来：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">public class RxBiaoQing &#123;</span><br><span class="line">    private final static String URLPrefix = &quot;http://qq.yh31.com&quot;;</span><br><span class="line"></span><br><span class="line">    public static Observable&lt;Bitmap&gt; getBiaoQing(final Context context, final String URL) &#123;</span><br><span class="line">        return Observable.create(new Observable.OnSubscribe&lt;String&gt;() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void call(Subscriber&lt;? super String&gt; subscriber) &#123;</span><br><span class="line">                            try &#123;</span><br><span class="line">                                Document doc = Jsoup.connect(URL)</span><br><span class="line">                                        .timeout(3000)</span><br><span class="line">                                        .get();</span><br><span class="line">                                Elements elements = doc.getElementsByTag(&quot;img&quot;);</span><br><span class="line">                                for (Element e : elements) &#123;</span><br><span class="line">                                    if (!e.attr(&quot;class&quot;).toString().equals(&quot;pic2&quot;)) &#123;</span><br><span class="line">                                        subscriber.onNext(URLPrefix + e.attr(&quot;src&quot;).toString());</span><br><span class="line">//                            L.i(URLPrefix+e.attr(&quot;src&quot;).toString());</span><br><span class="line">                                    &#125;</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125; catch (IOException e) &#123;</span><br><span class="line">                                e.printStackTrace();</span><br><span class="line">                            &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).flatMap(new Func1&lt;String, Observable&lt;Bitmap&gt;&gt;() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public Observable&lt;Bitmap&gt; call(String s) &#123;</span><br><span class="line">                Bitmap bitmap = null;</span><br><span class="line">                try &#123;</span><br><span class="line">                    bitmap = Picasso.with(context).load(s).get();</span><br><span class="line">                &#125; catch (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                return Observable.just(bitmap);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).subscribeOn(Schedulers.io())</span><br><span class="line">          .observeOn(AndroidSchedulers.mainThread());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>在事件源中进行网络表情爬取，每获得一个所需表情的图片地址时将其处理为Bitmap（这里使用Picasso库将String转化为Bitmap），注意flatmap将String变换为Bitmap的过程和调度器将事件源和观察者异步线程的过程。事件源完成后便是观察者的完成了。下面代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">final Observer&lt;Bitmap&gt; observer = new Observer&lt;Bitmap&gt;() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void onCompleted() &#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            public void onError(Throwable e) &#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            public void onNext(Bitmap bitmap) &#123;</span><br><span class="line">                lruCache.set(position+&quot;&quot;,bitmap);</span><br><span class="line">                L.i(&quot;size&quot;,lruCache.size()+&quot;&quot;);</span><br><span class="line">                L.i(&quot;size&quot;,&quot;max:&quot;+lruCache.size()+&quot;&quot;);</span><br><span class="line">                L.i(&quot;size&quot;,position+&quot;&quot;);</span><br><span class="line">                position++;</span><br><span class="line">                biaoQingAdapter.notifyDataSetChanged();</span><br><span class="line">                L.i(bitmap.toString());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br></pre></td></tr></table></figure>
<p>上面便是观察者在接收到事件源发出的通知（即Bitmap对象）后将Bitmap写入LruCache缓存并通知GridView显示的过程。<br>LruCache缓存我使用的是Picasso库中的，也可以自己动手使用原生的LruCache，但本人感觉原生的不如Picasso方便。然后将事件源与观察者绑定：<code>RxBiaoQing.getBiaoQing(MainActivity.this,URL).subscribe(observer);</code></p>
<p>上面完成了网络图片的异步请求和图片缓存的过程，下面便是将图片显示在GridView上。</p>
<h3 id="5-数据展示"><a href="#5-数据展示" class="headerlink" title="5.数据展示"></a>5.数据展示</h3><p>这一步最主要的是配置adapter。继承BaseAdapter，代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">public class BiaoQingAdapter extends BaseAdapter &#123;</span><br><span class="line">    private LayoutInflater layoutInflater;</span><br><span class="line">    private Context context;</span><br><span class="line">    private LruCache lruCache;</span><br><span class="line"></span><br><span class="line">    public BiaoQingAdapter(LruCache lruCache, Context context) &#123;</span><br><span class="line">        layoutInflater = LayoutInflater.from(context);</span><br><span class="line">        this.lruCache = lruCache;</span><br><span class="line">        this.context = context;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public int getCount() &#123;</span><br><span class="line">        return lruCache.size();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Object getItem(int position) &#123;</span><br><span class="line">        return lruCache.get(position+&quot;&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public long getItemId(int position) &#123;</span><br><span class="line">        return position;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public View getView(int position, View convertView, ViewGroup parent) &#123;</span><br><span class="line">        ViewHolder viewHolder = null;</span><br><span class="line">        if(convertView == null)&#123;</span><br><span class="line">            viewHolder = new ViewHolder();</span><br><span class="line">            convertView = layoutInflater.inflate(R.layout.item_gridview,null);</span><br><span class="line">            viewHolder.imageView = (ImageView) convertView.findViewById(R.id.item_iv);</span><br><span class="line">            convertView.setTag(viewHolder);</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            viewHolder = (ViewHolder) convertView.getTag();</span><br><span class="line">        &#125;</span><br><span class="line">        Bitmap bitmap = lruCache.get(position+&quot;&quot;);</span><br><span class="line">        viewHolder.imageView.setImageBitmap(bitmap);</span><br><span class="line">        return convertView;</span><br><span class="line">    &#125;</span><br><span class="line">    class ViewHolder&#123;</span><br><span class="line">        ImageView imageView;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>BaseAdapter的复写我就不多说了，主要要注意的是我将LruCache缓存传入适配器中，然后通过get()方法找寻到position对应的Bitmap，将Bitmap在对应的GridView的位置中显示出来。</p>
<h3 id="6-图片下载分享"><a href="#6-图片下载分享" class="headerlink" title="6.图片下载分享"></a>6.图片下载分享</h3><p>保存这个部分我就直接贴代码了。。。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">public void saveToSD(int position)&#123;</span><br><span class="line">        String fileName = &quot;biaoqing&quot;+position +&quot;.jpg&quot;;</span><br><span class="line">        File appDir = new File(Environment.getExternalStorageDirectory(),&quot;Tencent/MicroMsg/WeiXin&quot;);</span><br><span class="line">        if(!appDir.exists())&#123;</span><br><span class="line">            Toast.makeText(context,&quot;您未安装微信`.`！&quot;,Toast.LENGTH_SHORT).show();</span><br><span class="line">            appDir.mkdirs();</span><br><span class="line">        &#125;</span><br><span class="line">        File file = new File(appDir,fileName);</span><br><span class="line">        try &#123;</span><br><span class="line">            FileOutputStream fileOutputStream = new FileOutputStream(file);</span><br><span class="line">            lruCache.get(position+&quot;&quot;).compress(Bitmap.CompressFormat.JPEG,100,fileOutputStream);</span><br><span class="line">            fileOutputStream.flush();</span><br><span class="line">            fileOutputStream.close();</span><br><span class="line">            Toast.makeText(context,&quot;弹药已经装到库中！&quot;,Toast.LENGTH_SHORT).show();</span><br><span class="line">        &#125; catch (FileNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p>注意上面的文件夹路径在SD根目录下的Tencent/MicroMsg/WeiXin中，你可以自己修改切换。此外分享部分就不多说了，可以通过直接调用微信SDK或mob的ShareSDK来实现发送。当然了，intent也可以试试。</p>
<h3 id="7-添加权限"><a href="#7-添加权限" class="headerlink" title="7.添加权限"></a>7.添加权限</h3><p>辛苦了半天还是不行？看看有没有添加权限吧~~博主马大哈总是忘记这个地方。。。还有Android6.0的权限问题也要注意喔！<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;</span><br><span class="line">&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt;</span><br></pre></td></tr></table></figure></p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>这个项目写下来还是很有价值的<del>第一，你获得了一个无穷的弹药库，以后斗图不再低人一等啦</del>第二，你将收获RxJava，Picasso，Jsoup甚至BaseAdapter的使用技巧，这些都是很有价值的。。。由于博主水平不够，可能存在一些疏漏，欢迎评论指出。另外项目github地址在最上面，最好结合源码阅读此文。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/06/04/动手撸一个金馆长表情库——爬虫及异步请求/" data-id="cir1zx7d4001qxgyu7rldqf6m" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/原创/">原创</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Square全家桶前传——RxJava函数式编程入门（一）" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/05/25/Square全家桶前传——RxJava函数式编程入门（一）/" class="article-date">
  <time datetime="2016-05-25T08:35:15.000Z" itemprop="datePublished">2016-05-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Android快速开发/">Android快速开发</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/25/Square全家桶前传——RxJava函数式编程入门（一）/">Square全家桶前传——RxJava函数式编程入门（一）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>前言：作为Android开发者，构建项目应该更多地把精力放在业务逻辑上，于是一个完整的框架显得十分有价值。而且在搭建框架的过程中可以对软件开发有更深入的理解。于是博主打算开始构建一个完整的属于自己的框架，Square全家桶便是搭建框架的第一选择。接下来我将学习Square的几大著名的框架：RxJava（响应式编程），ButterKnife（依赖注入），Retrofit，Okhttp（网络请求），Picasso（图片加载缓存），EventBus（事件总线），Gson（Json解析）并利用它们来搭建自己的应用框架，下面开始RxJava的学习。</strong></p>
<p>RxJava的github地址：<a href="https://github.com/ReactiveX/RxJava" target="_blank" rel="external">https://github.com/ReactiveX/RxJava</a><br>RxJava请求图片简单Demo：<a href="https://github.com/VinceBarry/SquareDemo" target="_blank" rel="external">https://github.com/VinceBarry/SquareDemo</a><br>给Android开发者的RxJava详解：<a href="http://gank.io/post/560e15be2dca930e00da1083#toc_1" target="_blank" rel="external">http://gank.io/post/560e15be2dca930e00da1083#toc_1</a><br>深入浅出RxJava：<a href="http://blog.csdn.net/lzyzsd/article/details/41833541" target="_blank" rel="external">http://blog.csdn.net/lzyzsd/article/details/41833541</a></p>
<hr>
<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>在说明RxJava是什么之前，先大概说一下设计模式中的观察者模式（Publish–subscribe_pattern）。维基百科上的定义是这样的：In software architecture, publish–subscribe is a messaging pattern where senders of messages, called publishers, do not program the messages to be sent directly to specific receivers, called subscribers, but instead characterize published messages into classes without knowledge of which subscribers, if any, there may be. Similarly, subscribers express interest in one or more classes and only receive messages that are of interest, without knowledge of which publishers, if any, there are.也就是说，观察者模式包含两个对象：Publisher（事件源）和Subscribe（观察者）。事件源不关心自己应该把消息传递给哪些接收器，在它本身的状态改变时主动发出通知，而观察者则关心自己关联的事件源本身是否发生变化，一旦变化便做出响应。RxJava基本采用了观察者模式，利用观察者模式实现一些异步的操作。RxJava优点在于其相比Handler和AsyncTask而言逻辑简洁。下面博主利用使用RxJava来实现异步请求下载网络图片并将其加载在本地控件上的例子来讲解RxJava的基本使用。<strong>基本概念用粗体标出。</strong>由于我也是新手，存在疏漏请指正。</p>
<h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><p><strong>RxJava的四个基本概念：Observable (可观察者，即被观察者)、 Observer (观察者)、 subscribe (订阅)、事件。实质上就是观察者模式的基本概念。被观察者通过subscribe()方法与观察者实现订阅关系，之后一有事件发出就通知观察者。</strong><br>先导入依赖：<br>OK，很明显我们需要先把基础的思路理清：我们将通过事件源来实现在IO线程中获取并下载图片，一旦下载完成，便通知订阅者，订阅者在主线程中做出相应（弹出Toast“下载完成”）。新建事件源的代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Observable.create(new Observable.OnSubscribe&lt;Bitmap&gt;() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void call(Subscriber&lt;? super Bitmap&gt; subscriber) &#123;</span><br><span class="line">                Bitmap bitmap = null;</span><br><span class="line">                try &#123;</span><br><span class="line">                    bitmap = Picasso.with(context).load(url).get();</span><br><span class="line">                &#125; catch (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                if (bitmap == null) &#123;</span><br><span class="line">                    subscriber.onError(new Exception(&quot;Couldn&apos;t download the picture&quot;));</span><br><span class="line">                &#125;</span><br><span class="line">                subscriber.onNext(bitmap);</span><br><span class="line">                subscriber.onCompleted();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).subscribeOn(Schedulers.io());</span><br></pre></td></tr></table></figure>
<p>上面代码新建了一个存储Bitmap数据的事件源队列，然后通过Picasso库请求网络图片（关于Picasso后面的文章有讲解）获取Bitmap对象，将Bitmap对象塞入事件源并通过onNext()方法通知订阅者。注意subscribeOn(Schedulers.io())方法，<strong>Scheduler调度器</strong>的使用表明事件源在IO线程中进行。关于调度器的用法参见上面的文章。</p>
<p>然后新建一个订阅者</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Observer&lt;Bitmap&gt; observer = new Observer&lt;Bitmap&gt;() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void onCompleted() &#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            public void onError(Throwable e) &#123;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            public void onNext(Bitmap bitmap) &#123;</span><br><span class="line">                mIv.setImageBitmap(bitmap);</span><br><span class="line">                Toast.makeText(MainActivity.this,&quot;Picture&quot;,Toast.LENGTH_SHORT).show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br></pre></td></tr></table></figure>
<p>上面的订阅者采用最普遍最容易理解的方式，除了这种方式还有just()和from()两种方式。just(T…): 将传入的参数依次发送出来。from(T[]) / from(Iterable&lt;? extends T&gt;) : 将传入的数组或 Iterable 拆分成具体对象后，依次发送出来。在适当的时候使用这两种方式可以起到节省代码量的作用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Subscription s = RxPic.saveImage(MainActivity.this,&quot;http://img2.imgtn.bdimg.com/it/u=3234625060,3330214688&amp;fm=21&amp;gp=0.jpg&quot;,&quot;Hello&quot;)</span><br><span class="line">                .observeOn(AndroidSchedulers.mainThread())</span><br><span class="line">                .subscribe(observer);</span><br><span class="line">        if (this.mCompositeSubscription == null) &#123;</span><br><span class="line">            this.mCompositeSubscription = new CompositeSubscription();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        this.mCompositeSubscription.add(s);</span><br></pre></td></tr></table></figure>
<p>然后就是订阅者订阅事件源，通过将Observer和Observable关联到Subscription，然后使用CompsiteSubscription来添加此Subscription。完成以上操作我们就实现了异步请求网络图片并加载到ImageView中。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>RxJava的使用最主要是理解观察者模式，四个基本概念及其创建，如何订阅事件源和函数式编程（由于本文只是入门介绍，没有提到RxJava的函数编程，读者可以通过上面的链接进行学习，或者阅读博主下一篇博客），具体的Demo也参见上文中的博主的Github，如有错误求指正。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/05/25/Square全家桶前传——RxJava函数式编程入门（一）/" data-id="cir1zx7ch000zxgyuvf3py7v4" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/原创/">原创</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-SharedPreferences的基本使用及其封装类SPUtils剖析" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/05/17/SharedPreferences的基本使用及其封装类SPUtils剖析/" class="article-date">
  <time datetime="2016-05-17T15:42:29.000Z" itemprop="datePublished">2016-05-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Android知识库/">Android知识库</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/17/SharedPreferences的基本使用及其封装类SPUtils剖析/">SharedPreferences的基本使用及其封装类SPUtils剖析</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>写作原因：SharedPreferences作为Android常用的数据存储手段（常常被用来存储用户设置），其重要性无需多言，今天我抽空出来，将SharedPreferences做一个知识总结，方便自己日后使用，也帮助Android新手学习使用（本人也是新手，求指教）。</strong></p>
<hr>
<h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><p>先来看看Android官方API对于SharedPreferences（以下简称SP）的定义：SP是通过getSharedPreferences(String,int)返回的用于访问和储存设置（Preferences，我本人理解为设置）数据的接口。对于许多特定的设置的数据集，存在一个单例的类能够将数据集给所有客户分享。修改设置数据必须通过SharedPreferences.Editor对象来确保设置的值保持一个一致的状态并且当它们提交时能受控制。SP对象通过get()方法必须在Application中保持一成不变。简单来说，SharedPreferences是一种轻型的数据存储方式，基于XML文件存储key-value键值对（只能存储简单的类型）数据，常用来存储一些简单的配置信息。</p>
<h2 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h2><p>下面是使用SharedPreferences的基本步骤：</p>
<pre><code>1. 获得SharedPreferences对象；
2. 获得SharedPreferences.Editor对象；
3. 通过Editor接口的putXxx方法保存key-value对其中Xxx表示不同的数据类型；
4. 通过Editor接口的commit方法保存key-value对。
</code></pre><p>（注意：上述API定义已经说得很清楚了，SharedPreferences对象本身只能获取数据而不支持存储和修改，存储修改是通过Editor对象来实现的，所以SP对象不能直接用于写入数据）</p>
<p>具体代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SharedPreferences pref = PreferenceManager.getDefaultSharedPreferences(Context context);</span><br><span class="line">    //获取系统默认的SharedPreferences对象（Context中传入上下文，如MainActivity.this）;</span><br><span class="line">//或者：SharedPreferences pref = getSharedPreferences(&quot;XML文件名&quot;,“读取权限如MODE_PRIVATE&quot;);</span><br><span class="line">Editor editor = pref.edit();//获得Editor对象；</span><br><span class="line">editor.putString(key,value);//保存key-value对(有多种类型如putInt等)；</span><br><span class="line">editor.remove(key);//删除键值对；</span><br><span class="line">editor.commit();//一定要提交；</span><br><span class="line">pref.getString(key,defValue);//用于取值，key对应要取出的值的key,defValue是没取到值时的默认值；</span><br></pre></td></tr></table></figure></p>
<p>上面是基本的SP的使用方法，封装是面向对象的精华，鸿洋大神已经帮我们把SP封装好了，先膜拜一下，然后我们一起来学习内部实现：</p>
<h2 id="SPUtils学习"><a href="#SPUtils学习" class="headerlink" title="SPUtils学习"></a>SPUtils学习</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br></pre></td><td class="code"><pre><span class="line">package com.zhy.utils;  </span><br><span class="line">  </span><br><span class="line">import java.lang.reflect.InvocationTargetException;  </span><br><span class="line">import java.lang.reflect.Method;  </span><br><span class="line">import java.util.Map;  </span><br><span class="line">  </span><br><span class="line">import android.content.Context;  </span><br><span class="line">import android.content.SharedPreferences;  </span><br><span class="line">  </span><br><span class="line">public class SPUtils  </span><br><span class="line">&#123;  </span><br><span class="line">    /** </span><br><span class="line">     * 保存在手机里面的文件名 </span><br><span class="line">     */  </span><br><span class="line">    public static final String FILE_NAME = &quot;share_data&quot;;  </span><br><span class="line">  </span><br><span class="line">    /** </span><br><span class="line">     * 保存数据的方法，我们需要拿到保存数据的具体类型，然后根据类型调用不同的保存方法 </span><br><span class="line">     *  </span><br><span class="line">     * @param context </span><br><span class="line">     * @param key </span><br><span class="line">     * @param object </span><br><span class="line">     */  </span><br><span class="line">    public static void put(Context context, String key, Object object)  </span><br><span class="line">    &#123;  </span><br><span class="line">  </span><br><span class="line">        SharedPreferences sp = context.getSharedPreferences(FILE_NAME,  </span><br><span class="line">                Context.MODE_PRIVATE);  </span><br><span class="line">        SharedPreferences.Editor editor = sp.edit();  </span><br><span class="line">  </span><br><span class="line">        if (object instanceof String)  </span><br><span class="line">        &#123;  </span><br><span class="line">            editor.putString(key, (String) object);  </span><br><span class="line">        &#125; else if (object instanceof Integer)  </span><br><span class="line">        &#123;  </span><br><span class="line">            editor.putInt(key, (Integer) object);  </span><br><span class="line">        &#125; else if (object instanceof Boolean)  </span><br><span class="line">        &#123;  </span><br><span class="line">            editor.putBoolean(key, (Boolean) object);  </span><br><span class="line">        &#125; else if (object instanceof Float)  </span><br><span class="line">        &#123;  </span><br><span class="line">            editor.putFloat(key, (Float) object);  </span><br><span class="line">        &#125; else if (object instanceof Long)  </span><br><span class="line">        &#123;  </span><br><span class="line">            editor.putLong(key, (Long) object);  </span><br><span class="line">        &#125; else  </span><br><span class="line">        &#123;  </span><br><span class="line">            editor.putString(key, object.toString());  </span><br><span class="line">        &#125;  </span><br><span class="line">  </span><br><span class="line">        SharedPreferencesCompat.apply(editor);  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    /** </span><br><span class="line">     * 得到保存数据的方法，我们根据默认值得到保存的数据的具体类型，然后调用相对于的方法获取值 </span><br><span class="line">     *  </span><br><span class="line">     * @param context </span><br><span class="line">     * @param key </span><br><span class="line">     * @param defaultObject </span><br><span class="line">     * @return </span><br><span class="line">     */  </span><br><span class="line">    public static Object get(Context context, String key, Object defaultObject)  </span><br><span class="line">    &#123;  </span><br><span class="line">        SharedPreferences sp = context.getSharedPreferences(FILE_NAME,  </span><br><span class="line">                Context.MODE_PRIVATE);  </span><br><span class="line">  </span><br><span class="line">        if (defaultObject instanceof String)  </span><br><span class="line">        &#123;  </span><br><span class="line">            return sp.getString(key, (String) defaultObject);  </span><br><span class="line">        &#125; else if (defaultObject instanceof Integer)  </span><br><span class="line">        &#123;  </span><br><span class="line">            return sp.getInt(key, (Integer) defaultObject);  </span><br><span class="line">        &#125; else if (defaultObject instanceof Boolean)  </span><br><span class="line">        &#123;  </span><br><span class="line">            return sp.getBoolean(key, (Boolean) defaultObject);  </span><br><span class="line">        &#125; else if (defaultObject instanceof Float)  </span><br><span class="line">        &#123;  </span><br><span class="line">            return sp.getFloat(key, (Float) defaultObject);  </span><br><span class="line">        &#125; else if (defaultObject instanceof Long)  </span><br><span class="line">        &#123;  </span><br><span class="line">            return sp.getLong(key, (Long) defaultObject);  </span><br><span class="line">        &#125;  </span><br><span class="line">  </span><br><span class="line">        return null;  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    /** </span><br><span class="line">     * 移除某个key值已经对应的值 </span><br><span class="line">     * @param context </span><br><span class="line">     * @param key </span><br><span class="line">     */  </span><br><span class="line">    public static void remove(Context context, String key)  </span><br><span class="line">    &#123;  </span><br><span class="line">        SharedPreferences sp = context.getSharedPreferences(FILE_NAME,  </span><br><span class="line">                Context.MODE_PRIVATE);  </span><br><span class="line">        SharedPreferences.Editor editor = sp.edit();  </span><br><span class="line">        editor.remove(key);  </span><br><span class="line">        SharedPreferencesCompat.apply(editor);  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    /** </span><br><span class="line">     * 清除所有数据 </span><br><span class="line">     * @param context </span><br><span class="line">     */  </span><br><span class="line">    public static void clear(Context context)  </span><br><span class="line">    &#123;  </span><br><span class="line">        SharedPreferences sp = context.getSharedPreferences(FILE_NAME,  </span><br><span class="line">                Context.MODE_PRIVATE);  </span><br><span class="line">        SharedPreferences.Editor editor = sp.edit();  </span><br><span class="line">        editor.clear();  </span><br><span class="line">        SharedPreferencesCompat.apply(editor);  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    /** </span><br><span class="line">     * 查询某个key是否已经存在 </span><br><span class="line">     * @param context </span><br><span class="line">     * @param key </span><br><span class="line">     * @return </span><br><span class="line">     */  </span><br><span class="line">    public static boolean contains(Context context, String key)  </span><br><span class="line">    &#123;  </span><br><span class="line">        SharedPreferences sp = context.getSharedPreferences(FILE_NAME,  </span><br><span class="line">                Context.MODE_PRIVATE);  </span><br><span class="line">        return sp.contains(key);  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    /** </span><br><span class="line">     * 返回所有的键值对 </span><br><span class="line">     *  </span><br><span class="line">     * @param context </span><br><span class="line">     * @return </span><br><span class="line">     */  </span><br><span class="line">    public static Map&lt;String, ?&gt; getAll(Context context)  </span><br><span class="line">    &#123;  </span><br><span class="line">        SharedPreferences sp = context.getSharedPreferences(FILE_NAME,  </span><br><span class="line">                Context.MODE_PRIVATE);  </span><br><span class="line">        return sp.getAll();  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    /** </span><br><span class="line">     * 创建一个解决SharedPreferencesCompat.apply方法的一个兼容类 </span><br><span class="line">     *  </span><br><span class="line">     * @author zhy </span><br><span class="line">     *  </span><br><span class="line">     */  </span><br><span class="line">    private static class SharedPreferencesCompat  </span><br><span class="line">    &#123;  </span><br><span class="line">        private static final Method sApplyMethod = findApplyMethod();  </span><br><span class="line">  </span><br><span class="line">        /** </span><br><span class="line">         * 反射查找apply的方法 </span><br><span class="line">         *  </span><br><span class="line">         * @return </span><br><span class="line">         */  </span><br><span class="line">        @SuppressWarnings(&#123; &quot;unchecked&quot;, &quot;rawtypes&quot; &#125;)  </span><br><span class="line">        private static Method findApplyMethod()  </span><br><span class="line">        &#123;  </span><br><span class="line">            try  </span><br><span class="line">            &#123;  </span><br><span class="line">                Class clz = SharedPreferences.Editor.class;  </span><br><span class="line">                return clz.getMethod(&quot;apply&quot;);  </span><br><span class="line">            &#125; catch (NoSuchMethodException e)  </span><br><span class="line">            &#123;  </span><br><span class="line">            &#125;  </span><br><span class="line">  </span><br><span class="line">            return null;  </span><br><span class="line">        &#125;  </span><br><span class="line">  </span><br><span class="line">        /** </span><br><span class="line">         * 如果找到则使用apply执行，否则使用commit </span><br><span class="line">         *  </span><br><span class="line">         * @param editor </span><br><span class="line">         */  </span><br><span class="line">        public static void apply(SharedPreferences.Editor editor)  </span><br><span class="line">        &#123;  </span><br><span class="line">            try  </span><br><span class="line">            &#123;  </span><br><span class="line">                if (sApplyMethod != null)  </span><br><span class="line">                &#123;  </span><br><span class="line">                    sApplyMethod.invoke(editor);  </span><br><span class="line">                    return;  </span><br><span class="line">                &#125;  </span><br><span class="line">            &#125; catch (IllegalArgumentException e)  </span><br><span class="line">            &#123;  </span><br><span class="line">            &#125; catch (IllegalAccessException e)  </span><br><span class="line">            &#123;  </span><br><span class="line">            &#125; catch (InvocationTargetException e)  </span><br><span class="line">            &#123;  </span><br><span class="line">            &#125;  </span><br><span class="line">            editor.commit();  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面类将对SP的操作封装成了静态方法put(),get(),remove(),clear()等，put(),remove(),get(),clear()等,其实现基于上述基本步骤，只是根据形参中的object的数据类型选择不同的写入方法。另外有一点不同，上面类中使用的不是commit方法而是apply方法，为什么？找一下他的博客，发现：commit方法是同步的，并且我们很多时候的commit操作都是UI线程中，毕竟是IO操作，尽可能异步；所以我们使用apply进行替代，apply异步的进行写入。这样就清楚了。上述类通过反射获取SP.Editor中的apply()方法，重命名为sApplyMethod，调用invoke方法来实现将数据传递给editor，然后editor提交，从而完成apply()封装。</p>
<p>本次关于SharedPreferences即封装类SPUtils的解析就到这，如有错误希望能够指正。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/05/17/SharedPreferences的基本使用及其封装类SPUtils剖析/" data-id="cir1zx7c4000pxgyuv3l9w6tk" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/原创/">原创</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/">&laquo; __('prev')</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android-Google官方文档/">Android Google官方文档</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Android-Studio/">Android Studio</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Android-实战/">Android 实战</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Android快速开发/">Android快速开发</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Android知识库/">Android知识库</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Android第三方开源库/">Android第三方开源库</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java基础知识/">Java基础知识</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux学习/">Linux学习</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python基础知识/">Python基础知识</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/心情随笔/">心情随笔</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/">Android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/原创/">原创</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/心情/">心情</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/翻译/">翻译</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/转载/">转载</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Android/" style="font-size: 17.5px;">Android</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/Python/" style="font-size: 10px;">Python</a> <a href="/tags/原创/" style="font-size: 20px;">原创</a> <a href="/tags/心情/" style="font-size: 10px;">心情</a> <a href="/tags/翻译/" style="font-size: 12.5px;">翻译</a> <a href="/tags/转载/" style="font-size: 15px;">转载</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/07/25/小话java多线程机制/">小话java多线程机制</a>
          </li>
        
          <li>
            <a href="/2016/07/23/小话java注解机制/">小话java注解机制</a>
          </li>
        
          <li>
            <a href="/2016/07/23/小话java反射机制/">小话java反射机制</a>
          </li>
        
          <li>
            <a href="/2016/07/19/Android自定义View系列（二）——打造一个仿2K游戏摇杆/">Android自定义View系列（二）——打造一个仿2K游戏摇杆</a>
          </li>
        
          <li>
            <a href="/2016/07/18/Android自定义View系列（一）——打造一个爱心进度条/">Android自定义View系列（一）——打造一个爱心进度条</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 陈颍聪<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>