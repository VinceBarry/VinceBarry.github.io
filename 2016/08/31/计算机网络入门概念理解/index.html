<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

    

    <title>计算机网络入门概念理解 | RoadToGeek技术小屋</title>
    <meta name="author" content="陈颍聪">
    
    <meta name="description" content="RoadToGeek技术小屋">
    
    
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <meta property="og:title" content="计算机网络入门概念理解"/>
    <meta property="og:site_name" content="RoadToGeek技术小屋（Learner、Thinker、Pacer）"/>

    
    <meta property="og:image" content="undefined"/>
    

    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="alternate" href="/atom.xml" title="RoadToGeek技术小屋（Learner、Thinker、Pacer）" type="application/atom+xml">
    <link rel="stylesheet" href="/css/lib/materialize.min.css">
    <link rel="stylesheet" href="/css/lib/font-awesome.min.css">
    <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">

    
        <link rel="stylesheet" href="/css/lib/prettify-tomorrow-night-eighties.css" type="text/css">
    
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
</head>


<body>
    <img src="/weixin_favicon.png" style="position: absolute; left: -9999px; opacity: 0; filter: alpha(opacity=0);">

    <nav class="brown darken-1">
    <div class="nav-wrapper">
        <a href="#" data-activates="main-menu" class="button-collapse">
            <i class="fa fa-navicon"></i>
        </a>
        <div class="">
            <a href="/" class="brand-logo hide-on-med-and-down">RoadToGeek技术小屋（Learner、Thinker、Pacer）</a>
            <ul class="right hide-on-med-and-down">
                
                    <li>
                        <a class="menu-home " href="/" >
                            <i class="fa fa-home "></i>
                            
                            首页
                        </a>
                    </li>
                
                    <li>
                        <a class="menu-archive " href="/archives" >
                            <i class="fa fa-archive "></i>
                            
                            归档
                        </a>
                    </li>
                
                    <li>
                        <a class="menu-category category-menu" href="javascript:;" data-activates="category-menu" >
                            <i class="fa fa-bookmark "></i>
                            
                            分类
                        </a>
                    </li>
                
                    <li>
                        <a class="menu-reading " href="/reading" >
                            <i class="fa fa-book "></i>
                            
                            读书
                        </a>
                    </li>
                
                    <li>
                        <a class="menu-about " href="/about" >
                            <i class="fa fa-user "></i>
                            
                            关于
                        </a>
                    </li>
                
            </ul>
            <div>
    <ul class="side-nav brown darken-1" id="main-menu">
        
        <li class="side-user">
            <div class="row">
                <div class="col s4 no-padding">
                    <img class="avatar-image circle responsive-img" src="http://7xszli.com2.z0.glb.clouddn.com/mmexport1461491429496.jpg" alt="User Avatar">
                </div>
                <div class="info col s8 valign-wrapper no-padding">
                    <div class="valign">
                        <p class="name">RoadToGeek</p>
                        <p class="desc">Android/Java/数据结构/Coder</p>
                    </div>
                </div>
            </div>
        </li>
        

        
            <li class="no-padding">
                <a class="waves-effect menu-home " href="/" >
                    <i class="fa fa-home "></i>
                    
                    首页
                </a>
            </li>
        
            <li class="no-padding">
                <a class="waves-effect menu-archive " href="/archives" >
                    <i class="fa fa-archive "></i>
                    
                    归档
                </a>
            </li>
        
            <li class="no-padding">
                <a class="waves-effect menu-category category-menu" href="javascript:;" data-activates="category-menu" >
                    <i class="fa fa-bookmark "></i>
                    
                    分类
                </a>
            </li>
        
            <li class="no-padding">
                <a class="waves-effect menu-reading " href="/reading" >
                    <i class="fa fa-book "></i>
                    
                    读书
                </a>
            </li>
        
            <li class="no-padding">
                <a class="waves-effect menu-about " href="/about" >
                    <i class="fa fa-user "></i>
                    
                    关于
                </a>
            </li>
        
    </ul>

    <ul class="side-nav brown darken-1" id="category-menu">
    

            

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/Android知识库/">
                    Android知识库 <span class="right">6 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/Android第三方开源库/">
                    Android第三方开源库 <span class="right">5 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/Android-实战/">
                    Android-实战 <span class="right">3 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/Android-Google官方文档/">
                    Android-Google官方文档 <span class="right">2 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/Python基础知识/">
                    Python基础知识 <span class="right">2 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/Linux学习/">
                    Linux学习 <span class="right">3 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/Android快速开发/">
                    Android快速开发 <span class="right">4 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/计算机网络/">
                    计算机网络 <span class="right">2 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/学习技巧/">
                    学习技巧 <span class="right">1 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/Android-Studio/">
                    Android-Studio <span class="right">1 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/Java基础知识/">
                    Java基础知识 <span class="right">4 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/Android源码阅读/">
                    Android源码阅读 <span class="right">1 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/心情随笔/">
                    心情随笔 <span class="right">2 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/闲扯设计模式/">
                    闲扯设计模式 <span class="right">1 篇</span></a>
                </a>
            </li>

        

    </ul>
</div>

        </div>
    </div>
</nav>

<div id="search" class="modal search-modal">
    <div class="row">
        <div class="input-field col s12">
              <input id="search-input" type="text">
              <label for="search-input">搜索</label>
        </div>

    </div>
    <div id="search-result" class="search-result col s12">

    </div>
</div>


    <main>
        <div class="container main-container">
    <nav class="page-nav hide-on-small-only">
    <div class="nav-wrapper brown darken-1">
        <span class="breadcrumb">当前位置（分类目录）</span>
        
            
    
    
    <a class="breadcrumb" href="/categories/计算机网络/">计算机网络</a>


        

        
    </div>
</nav>

<article>
    <div class="card">
        <div class="card-content">
            

            <div class="article-title">
                
    
        <h1>计算机网络入门概念理解</h1>
    


            </div>
            <time class="light-green-link-context" datetime="2016-08-31T02:36:18.000Z"><a href="/2016/08/31/计算机网络入门概念理解/">2016-08-31</a></time>

            
    <div class="tags-row">
        
            <a href="/tags/原创/" class="chip light-green">原创</a>
        
            <a href="/tags/基础/" class="chip light-green">基础</a>
        
    </div>


            <div class="toc light-green-link-context hide-on-med-and-down">
    <ol class="section table-of-contents"><li class="section table-of-contents-item section table-of-contents-level-2"><a class="section table-of-contents-link" href="#诞生背景"><span class="section table-of-contents-text">诞生背景</span></a></li><li class="section table-of-contents-item section table-of-contents-level-2"><a class="section table-of-contents-link" href="#协议"><span class="section table-of-contents-text">协议</span></a></li><li class="section table-of-contents-item section table-of-contents-level-2"><a class="section table-of-contents-link" href="#OSI参考模型"><span class="section table-of-contents-text">OSI参考模型</span></a></li><li class="section table-of-contents-item section table-of-contents-level-2"><a class="section table-of-contents-link" href="#传输方式"><span class="section table-of-contents-text">传输方式</span></a></li><li class="section table-of-contents-item section table-of-contents-level-2"><a class="section table-of-contents-link" href="#地址"><span class="section table-of-contents-text">地址</span></a></li><li class="section table-of-contents-item section table-of-contents-level-2"><a class="section table-of-contents-link" href="#网络的构成要素"><span class="section table-of-contents-text">网络的构成要素</span></a></li><li class="section table-of-contents-item section table-of-contents-level-2"><a class="section table-of-contents-link" href="#总结"><span class="section table-of-contents-text">总结</span></a></li></ol>
</div>


            <div class="entry light-green-link-context">
                <p>下面我来讲解一些关于网络的基础知识，这些知识有利于帮助我们今后学习TCP/IP协议相关知识打好基础。</p>
<h2 id="诞生背景"><a href="#诞生背景" class="headerlink" title="诞生背景"></a>诞生背景</h2><p>首先从网络的诞生背景讲起。一开始计算机的运作是独立存在的（<strong>独立模式</strong>），每个计算机有各自的业务，用户需要在不同的计算机上执行特定的业务逻辑。用户采用卡带的方式将程序和数据输入计算机让计算机进行运算。之后出现了分时系统，分时系统具有“多终端，一主机 ”的特点，由于分时系统CPU时间片轮转的特性让用户有了“一人一机”的错觉。70年代后计算机日渐小型化，慢慢的出现了多台主机连接通信的技术，紧接着到80年代，互连多种计算机（包括超级计算机、PC等）的网络诞生。90年代后提出“瘦身”和“多供应商连接”的口号，电子邮件和万维网技术取得长足的发展。如今的社会已然是互联网的时代，甚至于<strong>一切皆“TCP/IP”连接</strong>。计算机在规模上从<strong>WAN</strong>（广域网）到<strong>LAN</strong>（局域网）。<br><img src="http://7xszli.com1.z0.glb.clouddn.com/network1.png" alt="network1"></p>
<h2 id="协议"><a href="#协议" class="headerlink" title="协议"></a>协议</h2><p>下面说一下协议相关的东西。<br>协议简单来说就是通信事物之间进行沟通的规则。由于计算机不具备人类的认知能力，所以要想实现计算机之间的通信，制定通信规则然后通信双方共同遵守该规则是通信的前提。这里提一下<strong>分组交换协议</strong>，后面要用到。分组交换是指将大数据切割成一个个包（Packet）进行传输的方法。注意切成包之后一定要在包上加上数据的源主机地址和目标地址、分组序号这些信息，即<strong>报文首部</strong>。注意一定要贴上这些东西，不然你怎么把数据发送出去，怎么让数据在目标地址那边把大数据凑出来？穿插了一下<strong>分组交换</strong>，下面继续前面刚刚提到的协议。协议开始是由各个厂家各自制定的，这样的结果就是用户只能使用同一个厂家的设备进行通信……后来ISO看不下去了，就制定了OSI标准协议（顺便给出了OSI参考模型）。虽然ISO给出的OSI协议最后并不流行，但是它提出了这种思想。今天TCP/IP协议正在一统天下。（注：TCP/IP不是ISO制定的，它是IETF制定的）<br><img src="http://7xszli.com1.z0.glb.clouddn.com/network2.png" alt="network2"></p>
<p>既然说到了分组交换，就把<strong>现代网络通信方式</strong>分组交换说一下吧。在这之前先说一下更加悠久的电路交换技术。先看一下下面这个图：<br><img src="http://7xszli.com1.z0.glb.clouddn.com/network3.png" alt="network3"></p>
<p>在电路交换技术中，计算机先通过电路交换机连接，此外还有另外一批计算机也通过电路交换机连接。如果计算机A与计算机F想要建立连接，怎么办呢？A与F通过中间的电路连接在一起。这样的方式不用多想存在许多弊端：不能同时并发通信，因为中间的电路每次只能给两台计算机通信用！于是人们想出了更加优秀的分组交换技术，看上图，就是将左侧的计算机需要发送的数据全部送到路由器里面切割成一个个的<strong>包</strong>（Packet）然后缓存在路由内部，路由按照队列的方式将这些包发送出去。这样就解决了电路交换技术中的一些问题。但是它也有些毛病，比如当路由缓存满时可能溢出导致数据丢失或者无法发送的情况。</p>
<h2 id="OSI参考模型"><a href="#OSI参考模型" class="headerlink" title="OSI参考模型"></a>OSI参考模型</h2><p>上面说到了ISO的OSI协议，后来它并没有被大量采用，不过ISO的OSI参考模型却成为今天网络体系结构的标准模型。让我们来看看这个是什么东东，为什么能影响力这么大？其实OSI参考模型就是将网络通信本来复杂无厘头的过程分成了7层（见下面），每一层都有它们各自管理的事情，相同层次之间可以使用<strong>协议</strong>通信，而不同层次之间又可以通过<strong>接口</strong>来通信。这个分层是如此的美妙，比如在这个系统内某一个层次发生更改或者拓展并不会影响到整个系统的特点，所以到今天它也一直在使用着。不过它也有一些劣势，像过分分层导致有些功能实现逻辑不得不重复实现。<br><img src="http://7xszli.com1.z0.glb.clouddn.com/network4.png" alt="network4"></p>
<p>下面我们一起来看看协议中7层各自的功能。博主以一个场景为例来介绍7层功能，欢迎吐槽。以小明向小红发送电子邮件为例。小明写好了一封邮件“早上好”，填好了小红的Email地址，然后点击“发送 ”按钮，<strong>应用层</strong>就开始摩拳擦掌了。应用层利用协议先在数据的前端附加一个首部（标签）信息，包括邮件内容“早上好”和收件人小红的信息。这些信息会在小红的应用层中被分析保存，此外还存在异常处理。小明的应用层把数据处理后传到下面的表示层去。为什么要有表示层捏？试想一下，小明的电脑他使用Outlook来发邮件，小红的电脑使用网页版来收文件，假设这两个软件的编码格式不同，如果直接进行收发会出现怎样的情况？当然是乱码咯。所以就要有<strong>表示层</strong>来解决这种情况，在发送方将数据转换成网络通用的标准数据格式，然后在接收方将这些特定格式的数据再次解码为本地的编码格式，这样就没有乱码问题了。注意表示层也会附加首部信息。好了，现在经过两层的处理，数据传到了<strong>会话层</strong>。这一层又是干嘛的呢？一封邮件看不出来它的作用，我就再举例吧。小明发完“早上好”又发了一封“吃了没”，会话层的作用就是解决建立连接，按照什么顺序发送的问题的，但是它不发送。比如说，建立一次连接发送“早上好”然后断开，再建立一次连接发送“吃了没”再断开；或者建立一次连接同时发送“早上好”“吃了没”。确定怎么建立连接，怎么发送是这一层的问题，这是连接管理层。接下来会话层会把数据继续传递至下一层，<strong>传输层</strong>以下就是真正发挥网络传输的地方了。上面的数据传到传输层，传输层就确定小明的主机与小红的主机是否连接了，没有连接就建立连接，通信完毕就断开连接。此外传输层会判断数据是否完整地到达了小红的主机，如果没有就重新发一遍。可以看出传输层具有保障数据可靠性的功能。经过了传输层，我们的连接就建立了。然而它并不会真的把数据发送出去，这就要下面的<strong>网络层</strong>和数据链路层来处理了。网络层是指从原地址到目标地址数据通信的过程，是整个通信的过程。而<strong>数据链路层</strong>是指传递过程中的中转站传递（见下面）。就好比小明的邮件要传到一个个别的设备最终才能到达小红的主机上。<br><img src="http://7xszli.com1.z0.glb.clouddn.com/network5.png" alt="network5"></p>
<p>最后一层是<strong>物理层</strong>，顾名思义，就是通过物理介质来实现数据传递的层级。这是通信的根本，没有物理介质通信不可能实现。在这一层里数据从0,1转换为电压或者脉冲光传递，通过MAC地址来实现传递。</p>
<p>经过这么漫长的步骤，小明终于把数据发送了出去。那么小红是怎么接收数据的呢？其实就是上面过程倒叙一遍啦。小红的主机从物理层开始不断将小明发送来的数据进行反向解码，从而一层层剥离最终得到想要的数据。关于OSI参考模型需要在今后的学习中不断更新理解，这里可能存在偏差。</p>
<h2 id="传输方式"><a href="#传输方式" class="headerlink" title="传输方式"></a>传输方式</h2><p>上面列举了小明和小红的通信过程，我们称之为<strong>面向有连接型连接</strong>，因为双方都建立了连接后才进行的通信。此外还有<strong>面向无连接型通信</strong>，UDP大家都知道吧，发送方就是一个劲地发，不管别人是否接收。这种方式有什么好处呢？它可以让处理变得简单，你发就行，我接收就行，不用去执行建立通信那一套东西。<br>其实上面的两种传输方式是一种分类，此外还有根据接收端数量来分类的方式，分为<strong>单播、广播、多播和任播*</strong>。这不难理解（见下图）<br><img src="http://7xszli.com1.z0.glb.clouddn.com/network6.png" alt="network6"></p>
<p>注意：多播和任播的客户端全体拥有同一个地址。</p>
<h2 id="地址"><a href="#地址" class="headerlink" title="地址"></a>地址</h2><p>说了这么多终于说到地址了。上面的通信过程必须有地址才能实现。地址具有两个重要的特性：<strong>唯一性</strong>和<strong>层次性</strong>。唯一性不多说了，在同一个通信网络中地址必须唯一指定，不然怎么通信……说说层次性，层次性是指地址中能够实现快速定位的能力。比如从一个电话号码可以看出用户的国家、省市、区名。IP地址由于其拥有网络号和主机号而拥有层次性。两个相同网络号的IP地址的主机的组织结构、提供商类型和地狱分布集中。而MAC地址不具有层次性。<br>下面说说寻址的问题。<br>网络传输过程中的节点会根据分组数据的地址判断是从哪个网卡发出来的，MAC寻址会参考<strong>地址转发表</strong>，IP寻址会参考<strong>路由控制表</strong>，具体寻址参考下面这张图，一目了然。<br><img src="http://7xszli.com1.z0.glb.clouddn.com/network7.png" alt="network7"></p>
<h2 id="网络的构成要素"><a href="#网络的构成要素" class="headerlink" title="网络的构成要素"></a>网络的构成要素</h2><p>上面讲了这么多，最后从宏观上，从现实中来感知一下网络的存在吧。网络的物理设备组成包括：<strong>网卡、中继器、网桥/2层交换机、路由/3层交换机、4-7层交换机、网关还有电缆</strong>。计算机通信是通过线缆来完成的，线缆的传输速率（又称带宽）指单位时间传输的数据量的多少。网络接口卡（NIC）有时也被称为网络适配器、网卡、LAN卡，是计算机连网的设备，具有独一无二的MAC地址。中继器处于物理层，是对电缆信号进行波形调整和放大然后继续传输的设备。可以认为集线器每个端口都是中继器。网桥（又称二层交换机）负责在数据链路层中的数据帧的重构、错误数据帧丢弃和传输数据帧。（维基百科上解释为&gt; “橋接器将网络的多个网段在数据链路层（OSI模型第2层）连接起来（即桥接）。”）<br>路由（又称三层交换机） 处于网络层，根据IP地址连接两个网络对分组报文进行转发，此外还有网络安全和分担网络负荷的功能。网关负责从传输层到应用层的数据进行转换和转发的设备。互联网邮件与手机邮件之间的转换服务。互联网与手机之间设置了一道网关，网关负责读取完各种不同的协议后，对它们逐一进行合理的转换，再将相应的数据转发出去。代理服务器也是网关的一种，称为应用网关。个人对于中继器、网桥、路由的理解就是数据传输从底层硬件逐渐往上层的管理设备。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>本次就讲这么多吧，容量已经够庞大了，供本人吸收消化和读者阅读，希望指出错误。</p>

            </div>
        </div>
    </div>
</article>




    <section id="comment">
        <div class="card">
            <div class="card-content">
                <!-- Duoshuo Comment BEGIN -->
                <div class="ds-thread" data-thread-key="2016/08/31/计算机网络入门概念理解/" data-title="计算机网络入门概念理解" data-url="http://yoursite.com/2016/08/31/计算机网络入门概念理解/"></div>

                <script type="text/javascript">
                    console.log(document.querySelector('.ds-thread'));
                    var duoshuoQuery = {
                        short_name: 'roadtogeek'
                    };
                    (function() {
                        var ds = document.createElement('script');
                        ds.type = 'text/javascript';
                        ds.async = true;
                        ds.src = (document.location.protocol == 'https:'
                            ? 'https:'
                            : 'http:') + '//static.duoshuo.com/embed.js';
                        ds.charset = 'UTF-8';
                        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
                    })();
                </script>
                <!-- Duoshuo Comment END -->
            </div>
        </div>
    </section>



</div>

        <div class="fixed-action-btn float-sitemap">
    <a class="btn-floating btn-large light-green">
      <i class="fa fa-caret-square-o-up"></i>
    </a>
    <ul>
      <li><a class="btn-return-top btn-floating waves-effect red" title="回到顶部"><i class="fa fa-arrow-circle-o-up"></i></a></li>
      <li><a class="btn-floating waves-effect button-collapse purple"  data-activates="main-menu" title="menu"><i class="fa fa-navicon"></i></a></li>
    </ul>
  </div>

    </main>
    <footer class="page-footer brown darken-1 darken-1">
    
    <div class="container">
        <div class="row">
            
            <div class="social-group col m3 s12">
                <h5 class="white-text">社交</h5>
                
                    <a class="social-link" href="http://blog.csdn.net/u011506583" target="_blank">
                        <i class="fa fa-2x fa-weibo"></i>
                    </a>
                
                    <a class="social-link" href="https://github.com/VinceBarry" target="_blank">
                        <i class="fa fa-2x fa-github"></i>
                    </a>
                
                    <a class="social-link" href="/atom.xml" target="_blank">
                        <i class="fa fa-2x fa-rss"></i>
                    </a>
                
            </div>
            

            
            <div class="col m9 s12">
                <h5 class="white-text">友情链接</h5>
                
                    <a class="social-link" href="http://raytaylorlin.com/" target="_blank">raytaylorism作者的技术博客</a>
                
                    <a class="social-link" href="http://blog.csdn.net/guolin_blog?viewmode=contents" target="_blank">郭霖CSDN博客</a>
                
                    <a class="social-link" href="http://blog.csdn.net/lmj623565791?viewmode=contents" target="_blank">张鸿洋CSDN博客</a>
                
                    <a class="social-link" href="http://blog.csdn.net/lzyzsd?viewmode=contents" target="_blank">大头鬼BruseCSDN博客</a>
                
                    <a class="social-link" href="http://www.ima-vida.com/" target="_blank">智能硬件与互联网创业协会</a>
                
            </div>
            
        </div>
    </div>
    

    <div class="footer-copyright light-green-link-context">
        <div class="container">
            © 2016 roadtogeek.cn, All rights reserved.
            <p class="right" style="margin-top: 0;">本博客由 <a href="https://hexo.io">Hexo</a> 强力驱动 | 主题 <a href="https://github.com/raytaylorlin/hexo-theme-raytaylorism">raytaylorism</a></p>
        </div>
    </div>
</footer>


    <noscript>
    <div class="noscript">
        <p class="center-align">当前网速较慢或者你使用的浏览器不支持博客特定功能，请尝试刷新或换用Chrome、Firefox等现代浏览器</p>
    </div>
</noscript>
<div class="noscript">
    <p class="center-align">当前网速较慢或者你使用的浏览器不支持博客特定功能，请尝试刷新或换用Chrome、Firefox等现代浏览器</p>
</div>


<script src="/js/jquery.min.js"></script>
<script src="/js/materialize.min.js"></script>

<script>
    (function($) {
        $(document).ready(function() {
            // 隐藏禁用javascript（针对微信内置浏览器）的提示
            $('.noscript').hide();

            // 图片缩放效果
            var $imgs = $('img').not('.slider-image').not('.avatar-image').not('.carousel-image').not('.card-cover-image').not('.qrcode');

            // 给图片加上点击放大效果（materialbox插件）
            $imgs.addClass('materialboxed').each(function(i, el) {
                $(this).attr('data-caption', $(this).attr('alt') || ' ');
            }).materialbox();

            // 优化表格的显示
            $('table').each(function() {
                var $table = $(this);
                // 除去多行代码的情况
                if ($table.find('pre').length == 0) {
                    $table.addClass('responsive-table striped bordered');
                }
            });

            // 首页幻灯片
            $('.slider').slider({indicators: true, full_width: true, interval: 8000});

            $(".button-collapse").sideNav();
            $(".category-menu").sideNav();

            // 针对gallery post
            $('.carousel').carousel({full_width: true});
            $('.carousel-control.prev').click(function() {
                $('.carousel').carousel('prev');
            });
            $('.carousel-control.next').click(function() {
                $('.carousel').carousel('next');
            });

            // 文章目录
            $('article').not('.simple-article').find('h1').add('h2').add('h3').add('h4').add('h5').add('h6').scrollSpy();
            // 修正文章目录的left-border颜色
            var color = $('.table-of-contents-text').css('color');
            $('.table-of-contents-link').css('border-left-color', color);

            // 针对移动端做的优化：FAB按钮点击一下收回
            if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
                $('.fixed-action-btn').addClass('click-to-toggle');
            }
            // 回到顶部
            $('.btn-return-top').click(function() {
                $('body, html').animate({
                    scrollTop: 0
                }, 500);
            });

            // 重置读书页面的Tab标签页的颜色
            $('li.tab a').hover(function() {
                $(this).toggleClass('text-lighten-4');
            });
            $('.indicator').addClass('light-green lighten-2');

            
            // 添加new标签
            $('').append('<span class="new badge light-green"></span>');
            

            // 搜索功能
            $('.modal-trigger').leanModal({
                // 打开搜索框时自动聚焦
                ready: function() {
                    if ($('#search').is(":visible")) {
                        $('#search-input').focus();
                    }
                }
            });
            var searchXml = "";
            if (searchXml.length == 0) {
             	searchXml = "search.xml";
            }
            var searchPath = "/" + searchXml;
            initSearch(searchPath, 'search-input', 'search-result');
        });

        // 初始化搜索与匹配函数
        var initSearch = function(path, search_id, content_id) {
            'use strict';
            $.ajax({
                url: path,
                dataType: "xml",
                success: function(xmlResponse) {
                    // get the contents from search data
                    var datas = $("entry", xmlResponse).map(function() {
                        return {
                            title: $("title", this).text(),
                            content: $("content", this).text(),
                            url: $("url", this).text()
                        };
                    }).get();
                    var $input = document.getElementById(search_id);
                    var $resultContent = document.getElementById(content_id);
                    $input.addEventListener('input', function() {
                        var str = '<ul class=\"search-result-list\">';
                        var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                        $resultContent.innerHTML = "";
                        if (this.value.trim().length <= 0) {
                            return;
                        }
                        // perform local searching
                        datas.forEach(function(data) {
                            var isMatch = true;
                            var content_index = [];
                            var data_title = data.title.trim().toLowerCase();
                            var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                            var data_url = data.url;
                            var index_title = -1;
                            var index_content = -1;
                            var first_occur = -1;
                            // only match artiles with not empty titles and contents
                            if (data_title != '' && data_content != '') {
                                keywords.forEach(function(keyword, i) {
                                    index_title = data_title.indexOf(keyword);
                                    index_content = data_content.indexOf(keyword);
                                    if (index_title < 0 && index_content < 0) {
                                        isMatch = false;
                                    } else {
                                        if (index_content < 0) {
                                            index_content = 0;
                                        }
                                        if (i == 0) {
                                            first_occur = index_content;
                                        }
                                    }
                                });
                            }
                            // show search results
                            if (isMatch) {
                                keywords.forEach(function(keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    data_title = data_title.replace(regS, "<span class=\"search-keyword light-green lighten-2\">" + keyword + "</span>");
                                });

                                str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                                var content = data.content.trim().replace(/<[^>]+>/g, "");
                                if (first_occur >= 0) {
                                    // cut out 100 characters
                                    var start = first_occur - 20;
                                    var end = first_occur + 80;
                                    if (start < 0) {
                                        start = 0;
                                    }
                                    if (start == 0) {
                                        end = 100;
                                    }
                                    if (end > content.length) {
                                        end = content.length;
                                    }
                                    var match_content = content.substring(start, end);
                                    // highlight all keywords
                                    keywords.forEach(function(keyword) {
                                        var regS = new RegExp(keyword, "gi");
                                        match_content = match_content.replace(regS, "<span class=\"search-keyword light-green lighten-2\">" + keyword + "</span>");
                                    });

                                    str += "<p class=\"search-result\">..." + match_content + "...</p>"
                                }
                                str += "</li>";
                            }
                        });
                        str += "</ul>";
                        $resultContent.innerHTML = str;
                    });
                }
            });
        }
    })(jQuery);
</script>


<script src="/js/prettify.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $("pre").addClass("prettyprint");
        prettyPrint();
    });
</script>




<script type="text/javascript" src="http://tajs.qq.com/stats?sId=56878365" charset="UTF-8"></script>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
});
</script>
<script type="text/javascript" async
  src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>



</body>
</html>
